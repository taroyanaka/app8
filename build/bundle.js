var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function g(){return u("")}function h(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}let y;function v(t){y=t}function b(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const $=[],T=[];let x=[];const w=[],D=Promise.resolve();let C=!1;function S(t){x.push(t)}const E=new Set;let O=0;function k(){if(0!==O)return;const t=y;do{try{for(;O<$.length;){const t=$[O];O++,v(t),N(t.$$)}}catch(t){throw $.length=0,O=0,t}for(v(null),$.length=0,O=0;T.length;)T.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];E.has(e)||(E.add(e),e())}x.length=0}while($.length);for(;w.length;)w.pop()();C=!1,E.clear(),v(t)}function N(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const j=new Set;function I(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];x.forEach((a=>-1===t.indexOf(a)?e.push(a):n.push(a))),n.forEach((t=>t())),x=e}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function A(t,e){-1===t.$$.dirty[0]&&($.push(t),C||(C=!0,D.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(i,c,l,d,s,u,f,g=[-1]){const h=y;v(i);const p=i.$$={fragment:null,ctx:[],props:u,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(h?h.$$.context:[])),callbacks:n(),dirty:g,skip_bound:!1,root:c.target||h.$$.root};f&&f(p.root);let _=!1;if(p.ctx=l?l(i,c.props||{},((t,e,...n)=>{const a=n.length?n[0]:e;return p.ctx&&s(p.ctx[t],p.ctx[t]=a)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](a),_&&A(i,t)),e})):[],p.update(),_=!0,a(p.before_update),p.fragment=!!d&&d(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(r)}else p.fragment&&p.fragment.c();c.intro&&((m=i.$$.fragment)&&m.i&&(j.delete(m),m.i(b))),function(t,n,i,c){const{fragment:l,after_update:r}=t.$$;l&&l.m(n,i),c||S((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):a(n),t.$$.on_mount=[]})),r.forEach(S)}(i,c.target,c.anchor,c.customElement),k()}var m,b;v(h)}class W{$destroy(){I(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(n),()=>{const t=a.indexOf(n);-1!==t&&a.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function V(t,e,n){const a=t.slice();return a[42]=e[n],a}function J(t,e,n){const a=t.slice();return a[42]=e[n],a}function L(t,e,n){const a=t.slice();return a[42]=e[n],a}function z(t,e,n){const a=t.slice();return a[49]=e[n],a}function U(t,e,n){const a=t.slice();return a[42]=e[n],a}function B(t,e,n){const a=t.slice();return a[49]=e[n],a}function G(t,e,n){const a=t.slice();return a[42]=e[n],a}function K(t,e,n){const a=t.slice();return a[58]=e[n],a}function M(t){let e,n,a,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=Y(K(t,o,e));return{c(){e=s("p"),e.textContent="Errors:",n=f();for(let t=0;t<i.length;t+=1)i[t].c();a=g()},m(t,o){l(t,e,o),l(t,n,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,o);l(t,a,o)},p(t,e){if(64&e[0]){let n;for(o=t[6],n=0;n<o.length;n+=1){const c=K(t,o,n);i[n]?i[n].p(c,e):(i[n]=Y(c),i[n].c(),i[n].m(a.parentNode,a))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(t){t&&r(e),t&&r(n),d(i,t),t&&r(a)}}}function Y(t){let e,n,a=t[58]+"";return{c(){e=s("div"),n=u(a)},m(t,a){l(t,e,a),c(e,n)},p(t,e){64&e[0]&&a!==(a=t[58]+"")&&_(n,a)},d(t){t&&r(e)}}}function q(t){let e,n=t[9],a=[];for(let e=0;e<n.length;e+=1)a[e]=H(B(t,n,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=g()},m(t,n){for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,n);l(t,e,n)},p(t,o){if(397824&o[0]){let i;for(n=t[9],i=0;i<n.length;i+=1){const c=B(t,n,i);a[i]?a[i].p(c,o):(a[i]=H(c),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},d(t){d(a,t),t&&r(e)}}}function F(t){let e,n,a,o,i,d,g,m,y,v,b,$,T,x,w,D,C=t[42].id+"",S=t[42].desc_id+"",E=t[42].name+"";function O(){return t[22](t[42])}return{c(){e=s("div"),n=s("p"),a=u("id: "),o=u(C),i=f(),d=s("p"),g=u("desc_id: "),m=u(S),y=f(),v=s("p"),b=u("tag.name: "),$=u(E),T=f(),x=s("button"),x.textContent="delete_desc_tag",p(e,"class","desc_tag svelte-faxry4")},m(t,r){l(t,e,r),c(e,n),c(n,a),c(n,o),c(e,i),c(e,d),c(d,g),c(d,m),c(e,y),c(e,v),c(v,b),c(v,$),c(e,T),c(e,x),w||(D=h(x,"click",O),w=!0)},p(e,n){t=e,512&n[0]&&C!==(C=t[42].id+"")&&_(o,C),512&n[0]&&S!==(S=t[42].desc_id+"")&&_(m,S),512&n[0]&&E!==(E=t[42].name+"")&&_($,E)},d(t){t&&r(e),w=!1,D()}}}function H(t){let e,n,o,i,g,p,m,y,v,b,$,T,x,w,D,C,S,E,O,k,N,j,I,A,P,W,V,J=t[49].id+"",L=t[49].auth_uid.slice(0,10)+"",z=t[49].title+"",U=t[49].description+"";function B(){return t[20](t[49])}function K(){return t[21](t[49])}let M=t[49].tags,Y=[];for(let e=0;e<M.length;e+=1)Y[e]=F(G(t,M,e));return{c(){e=s("div"),n=s("p"),o=u("id: "),i=u(J),g=f(),p=s("button"),p.textContent="set_desc_data",m=f(),y=s("button"),y.textContent="delete_desc",v=f(),b=s("p"),$=u("auth_uid: "),T=u(L),x=u("..."),w=f(),D=s("p"),C=u("title: "),S=u(z),E=f(),O=s("p"),k=u("description: "),N=u(U),j=f(),I=s("div"),I.textContent="tags:",A=f();for(let t=0;t<Y.length;t+=1)Y[t].c();P=f()},m(t,a){l(t,e,a),c(e,n),c(n,o),c(n,i),c(e,g),c(e,p),c(e,m),c(e,y),c(e,v),c(e,b),c(b,$),c(b,T),c(b,x),c(e,w),c(e,D),c(D,C),c(D,S),c(e,E),c(e,O),c(O,k),c(O,N),c(e,j),c(e,I),c(e,A);for(let t=0;t<Y.length;t+=1)Y[t]&&Y[t].m(e,null);c(e,P),W||(V=[h(p,"click",B),h(y,"click",K)],W=!0)},p(n,a){if(t=n,512&a[0]&&J!==(J=t[49].id+"")&&_(i,J),512&a[0]&&L!==(L=t[49].auth_uid.slice(0,10)+"")&&_(T,L),512&a[0]&&z!==(z=t[49].title+"")&&_(S,z),512&a[0]&&U!==(U=t[49].description+"")&&_(N,U),262656&a[0]){let n;for(M=t[49].tags,n=0;n<M.length;n+=1){const o=G(t,M,n);Y[n]?Y[n].p(o,a):(Y[n]=F(o),Y[n].c(),Y[n].m(e,P))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=M.length}},d(t){t&&r(e),d(Y,t),W=!1,a(V)}}}function Z(t){let e,n=t[8].allDescs,a=[];for(let e=0;e<n.length;e+=1)a[e]=R(z(t,n,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=g()},m(t,n){for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,n);l(t,e,n)},p(t,o){if(397568&o[0]){let i;for(n=t[8].allDescs,i=0;i<n.length;i+=1){const c=z(t,n,i);a[i]?a[i].p(c,o):(a[i]=R(c),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},d(t){d(a,t),t&&r(e)}}}function Q(t){let e,n,a,o,i,d,g,m,y,v,b,$,T,x,w,D,C=t[42].id+"",S=t[42].desc_id+"",E=t[42].name+"";function O(){return t[25](t[42])}return{c(){e=s("div"),n=s("p"),a=u("id: "),o=u(C),i=f(),d=s("p"),g=u("desc_id: "),m=u(S),y=f(),v=s("p"),b=u("tag.name: "),$=u(E),T=f(),x=s("button"),x.textContent="delete_desc_tag",p(e,"class","desc_tag svelte-faxry4")},m(t,r){l(t,e,r),c(e,n),c(n,a),c(n,o),c(e,i),c(e,d),c(d,g),c(d,m),c(e,y),c(e,v),c(v,b),c(v,$),c(e,T),c(e,x),w||(D=h(x,"click",O),w=!0)},p(e,n){t=e,256&n[0]&&C!==(C=t[42].id+"")&&_(o,C),256&n[0]&&S!==(S=t[42].desc_id+"")&&_(m,S),256&n[0]&&E!==(E=t[42].name+"")&&_($,E)},d(t){t&&r(e),w=!1,D()}}}function R(t){let e,n,o,i,g,p,m,y,v,b,$,T,x,w,D,C,S,E,O,k,N,j,I,A,P,W,V,J=t[49].id+"",L=t[49].auth_uid.slice(0,10)+"",z=t[49].title+"",B=t[49].description+"";function G(){return t[23](t[49])}function K(){return t[24](t[49])}let M=t[49].tags,Y=[];for(let e=0;e<M.length;e+=1)Y[e]=Q(U(t,M,e));return{c(){e=s("div"),n=s("p"),o=u("id: "),i=u(J),g=f(),p=s("button"),p.textContent="set_desc_data",m=f(),y=s("button"),y.textContent="delete_desc",v=f(),b=s("p"),$=u("auth_uid: "),T=u(L),x=u("..."),w=f(),D=s("p"),C=u("title: "),S=u(z),E=f(),O=s("p"),k=u("description: "),N=u(B),j=f(),I=s("div"),I.textContent="tags:",A=f();for(let t=0;t<Y.length;t+=1)Y[t].c();P=f()},m(t,a){l(t,e,a),c(e,n),c(n,o),c(n,i),c(e,g),c(e,p),c(e,m),c(e,y),c(e,v),c(e,b),c(b,$),c(b,T),c(b,x),c(e,w),c(e,D),c(D,C),c(D,S),c(e,E),c(e,O),c(O,k),c(O,N),c(e,j),c(e,I),c(e,A);for(let t=0;t<Y.length;t+=1)Y[t]&&Y[t].m(e,null);c(e,P),W||(V=[h(p,"click",G),h(y,"click",K)],W=!0)},p(n,a){if(t=n,256&a[0]&&J!==(J=t[49].id+"")&&_(i,J),256&a[0]&&L!==(L=t[49].auth_uid.slice(0,10)+"")&&_(T,L),256&a[0]&&z!==(z=t[49].title+"")&&_(S,z),256&a[0]&&B!==(B=t[49].description+"")&&_(N,B),262400&a[0]){let n;for(M=t[49].tags,n=0;n<M.length;n+=1){const o=U(t,M,n);Y[n]?Y[n].p(o,a):(Y[n]=Q(o),Y[n].c(),Y[n].m(e,P))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=M.length}},d(t){t&&r(e),d(Y,t),W=!1,a(V)}}}function X(t){let e,n=t[8].allTags,a=[];for(let e=0;e<n.length;e+=1)a[e]=tt(L(t,n,e));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=g()},m(t,n){for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,n);l(t,e,n)},p(t,o){if(256&o[0]){let i;for(n=t[8].allTags,i=0;i<n.length;i+=1){const c=L(t,n,i);a[i]?a[i].p(c,o):(a[i]=tt(c),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},d(t){d(a,t),t&&r(e)}}}function tt(t){let e,n,a,o,i,d,g,h,p,m=t[42].id+"",y=t[42].name+"";return{c(){e=s("div"),n=s("p"),a=u("id: "),o=u(m),i=f(),d=s("p"),g=u("tag.name: "),h=u(y),p=f()},m(t,r){l(t,e,r),c(e,n),c(n,a),c(n,o),c(e,i),c(e,d),c(d,g),c(d,h),c(e,p)},p(t,e){256&e[0]&&m!==(m=t[42].id+"")&&_(o,m),256&e[0]&&y!==(y=t[42].name+"")&&_(h,y)},d(t){t&&r(e)}}}function et(t){let e,n,a,o,i,d,f,g,h,m=t[42].id+"",y=t[42].desc_id+"",v=t[42].name+"";return{c(){e=u("id: "),n=u(m),a=u("\n\t\t\tdesc_id: "),o=u(y),i=u("\n\t\t\ttag.name: "),d=s("input"),g=s("p"),h=u(v),p(d,"type","text"),d.value=f=t[42].name},m(t,r){l(t,e,r),l(t,n,r),l(t,a,r),l(t,o,r),l(t,i,r),l(t,d,r),l(t,g,r),c(g,h)},p(t,e){32&e[0]&&m!==(m=t[42].id+"")&&_(n,m),32&e[0]&&y!==(y=t[42].desc_id+"")&&_(o,y),32&e[0]&&f!==(f=t[42].name)&&d.value!==f&&(d.value=f),32&e[0]&&v!==(v=t[42].name+"")&&_(h,v)},d(t){t&&r(e),t&&r(n),t&&r(a),t&&r(o),t&&r(i),t&&r(d),t&&r(g)}}}function nt(t){let e,n;return{c(){e=s("option"),e.__value=n=t[42].name,e.value=e.__value},m(t,n){l(t,e,n)},p(t,a){2&a[0]&&n!==(n=t[42].name)&&(e.__value=n,e.value=e.__value)},d(t){t&&r(e)}}}function at(e){let n,o,i,g,y,v,b,$,T,x,w,D,C,S,E,O,k,N,j,I,A,P,W,L,z,U,B,G,K,Y,F,H,Q,R,tt,at,ot,ct,lt,rt,dt,st,ut,ft,gt,ht,pt,_t,mt,yt,vt,bt,$t,Tt,xt,wt,Dt,Ct,St,Et,Ot,kt,Nt,jt,It,At,Pt,Wt,Vt,Jt,Lt,zt,Ut=e[10].slice(0,10)+"",Bt=e[6]>0&&M(e),Gt=e[9]&&q(e),Kt=e[8].allDescs&&Z(e),Mt=e[8].allTags&&X(e),Yt=e[5],qt=[];for(let t=0;t<Yt.length;t+=1)qt[t]=et(J(e,Yt,t));let Ft=e[1],Ht=[];for(let t=0;t<Ft.length;t+=1)Ht[t]=nt(V(e,Ft,t));return{c(){n=s("div"),o=s("div"),i=s("div"),g=s("div"),y=u("auth_uid: "),v=u(e[10]),b=f(),$=s("div"),T=u("auth_login_result: "),x=s("span"),w=u(e[7]),D=f(),C=s("div"),S=u("auth_google_login: "),E=s("button"),E.textContent="auth_google_login",O=f(),k=s("button"),k.textContent="init_and_sample_insert",N=f(),j=s("button"),j.textContent="init_db",I=f(),A=s("button"),A.textContent="get_all_descs_and_tags",P=f(),W=s("div"),L=s("div"),z=s("div"),Bt&&Bt.c(),U=f(),B=s("div"),G=s("h1"),G.textContent="Your Web Data Descs",K=f(),Gt&&Gt.c(),Y=f(),F=s("h1"),F.textContent="Web Data Descs",H=f(),Kt&&Kt.c(),Q=f(),R=s("div"),tt=s("h1"),tt.textContent="Web Data Tags",at=f(),Mt&&Mt.c(),ot=f(),ct=s("div"),lt=s("h1"),lt.textContent="Web Data Edit",rt=f(),dt=s("button"),dt.textContent="update_desc",st=u("\n\t\t\n\t\t\n\t\t\n\t\t \n\t\tauth_uid: "),ut=s("p"),ft=u(Ut),gt=u("..."),ht=f(),pt=s("p"),_t=u("id: "),mt=u(e[2]),yt=u("\n\t\t\n\t\t\n\t\t\n\t\ttitle: "),vt=s("input"),bt=s("p"),$t=u(e[3]),Tt=u("\n\t\tdescription: "),xt=s("input"),wt=s("p"),Dt=u(e[4]),Ct=f(),St=s("div"),St.textContent="tags:",Et=f();for(let t=0;t<qt.length;t+=1)qt[t].c();Ot=u("\t\t\t\t\n\t\t\t\t\n\t\t\t\ttagをdescに追加\n\t\t\t\t"),kt=s("label"),kt.textContent="all_tags",Nt=f(),jt=s("input"),It=f(),At=s("datalist");for(let t=0;t<Ht.length;t+=1)Ht[t].c();Pt=f(),Wt=s("button"),Wt.textContent="add_tag_to_desc",Vt=f(),Jt=s("button"),Jt.textContent="insert_desc",p(o,"class","header svelte-faxry4"),p(z,"class","console"),p(B,"class","list"),p(R,"class","list2"),p(L,"class","left-column server_side svelte-faxry4"),p(vt,"type","text"),p(xt,"type","text"),p(kt,"for","my_all_tags"),p(jt,"list","all_tags"),p(jt,"id","my_all_tags"),p(jt,"name","my_all_tags"),p(At,"id","all_tags"),p(Jt,"class","fetch_insert_desc_button svelte-faxry4"),p(ct,"class","right-column svelte-faxry4"),p(W,"class","content svelte-faxry4"),p(n,"class","container svelte-faxry4")},m(t,a){l(t,n,a),c(n,o),c(o,i),c(i,g),c(g,y),c(g,v),c(i,b),c(i,$),c($,T),c($,x),c(x,w),c(i,D),c(i,C),c(C,S),c(C,E),c(o,O),c(o,k),c(o,N),c(o,j),c(o,I),c(o,A),c(n,P),c(n,W),c(W,L),c(L,z),Bt&&Bt.m(z,null),c(L,U),c(L,B),c(B,G),c(B,K),Gt&&Gt.m(B,null),c(B,Y),c(B,F),c(B,H),Kt&&Kt.m(B,null),c(L,Q),c(L,R),c(R,tt),c(R,at),Mt&&Mt.m(R,null),c(W,ot),c(W,ct),c(ct,lt),c(ct,rt),c(ct,dt),c(ct,st),c(ct,ut),c(ut,ft),c(ut,gt),c(ct,ht),c(ct,pt),c(pt,_t),c(pt,mt),c(ct,yt),c(ct,vt),m(vt,e[3]),c(ct,bt),c(bt,$t),c(ct,Tt),c(ct,xt),m(xt,e[4]),c(ct,wt),c(wt,Dt),c(ct,Ct),c(ct,St),c(ct,Et);for(let t=0;t<qt.length;t+=1)qt[t]&&qt[t].m(ct,null);c(ct,Ot),c(ct,kt),c(ct,Nt),c(ct,jt),m(jt,e[0]),c(ct,It),c(ct,At);for(let t=0;t<Ht.length;t+=1)Ht[t]&&Ht[t].m(At,null);c(ct,Pt),c(ct,Wt),c(ct,Vt),c(ct,Jt),Lt||(zt=[h(E,"click",e[19]),h(k,"click",e[13]),h(j,"click",it),h(A,"click",e[15]),h(dt,"click",e[16]),h(vt,"input",e[26]),h(xt,"input",e[27]),h(jt,"input",e[28]),h(Wt,"click",e[29]),h(Jt,"click",e[14])],Lt=!0)},p(t,e){if(1024&e[0]&&_(v,t[10]),128&e[0]&&_(w,t[7]),t[6]>0?Bt?Bt.p(t,e):(Bt=M(t),Bt.c(),Bt.m(z,null)):Bt&&(Bt.d(1),Bt=null),t[9]?Gt?Gt.p(t,e):(Gt=q(t),Gt.c(),Gt.m(B,Y)):Gt&&(Gt.d(1),Gt=null),t[8].allDescs?Kt?Kt.p(t,e):(Kt=Z(t),Kt.c(),Kt.m(B,null)):Kt&&(Kt.d(1),Kt=null),t[8].allTags?Mt?Mt.p(t,e):(Mt=X(t),Mt.c(),Mt.m(R,null)):Mt&&(Mt.d(1),Mt=null),1024&e[0]&&Ut!==(Ut=t[10].slice(0,10)+"")&&_(ft,Ut),4&e[0]&&_(mt,t[2]),8&e[0]&&vt.value!==t[3]&&m(vt,t[3]),8&e[0]&&_($t,t[3]),16&e[0]&&xt.value!==t[4]&&m(xt,t[4]),16&e[0]&&_(Dt,t[4]),32&e[0]){let n;for(Yt=t[5],n=0;n<Yt.length;n+=1){const a=J(t,Yt,n);qt[n]?qt[n].p(a,e):(qt[n]=et(a),qt[n].c(),qt[n].m(ct,Ot))}for(;n<qt.length;n+=1)qt[n].d(1);qt.length=Yt.length}if(1&e[0]&&jt.value!==t[0]&&m(jt,t[0]),2&e[0]){let n;for(Ft=t[1],n=0;n<Ft.length;n+=1){const a=V(t,Ft,n);Ht[n]?Ht[n].p(a,e):(Ht[n]=nt(a),Ht[n].c(),Ht[n].m(At,null))}for(;n<Ht.length;n+=1)Ht[n].d(1);Ht.length=Ft.length}},i:t,o:t,d(t){t&&r(n),Bt&&Bt.d(),Gt&&Gt.d(),Kt&&Kt.d(),Mt&&Mt.d(),d(qt,t),d(Ht,t),Lt=!1,a(zt)}}}let ot="http://localhost:8000";async function it(){try{const t=await fetch(ot+"/init_db",{method:"POST",headers:{"Content-Type":"application/json"}}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}}function ct(t,e,n){let a="",o=[],i=null,c=(new Date).toISOString(),l=(new Date).toISOString(),r="",d="",s=[],u=[],f="Not logged in",g=[],h=[];let p="user1a34efgh5678ijkl9012mnop";function _(t,e){try{const a=o.find((t=>t.name===e));if(a){a.desc_id=t;const e=s.some((t=>t.id==t.id));e||n(5,s=[...s,a])}else{const a={id:o.length+1,name:e,desc_id:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};n(1,o=[...o,a]),n(5,s=[...s,a])}}catch(t){console.error("Error:",t)}}function m(t){try{const e=g.allDescs.find((e=>e.id===t));console.log(e.tags),e?(n(10,p=e.auth_uid),n(2,i=e.id),c=e.created_at,l=e.updated_at,n(3,r=e.title),n(4,d=e.description),n(5,s=e.tags)):console.error(`No description found with id: ${t}`)}catch(t){console.error("Error:",t)}}const y=[{auth_uid:"user1",desc_id:1,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo1",description:"bar1",tags:[{desc_id:1,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:2,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo2",description:"bar2",tags:[{desc_id:2,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:2,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user2",desc_id:3,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo3",description:"bar3",tags:[{desc_id:3,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:3,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}];const v={validateAuthUid:t=>/^[a-zA-Z0-9_-]+$/.test(t),validateDescId:t=>(console.log("validateDescId",t),Number.isInteger(t)&&t>0),validateISODate:t=>/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(t),validateTitle:t=>(console.log("validateTitle",t),"string"==typeof t&&t.length>=1&&t.length<=100),validateDescription:t=>(console.log("validateDescription",t),"string"==typeof t&&t.length>=1&&t.length<=1e3),validateTagName:t=>"string"==typeof t&&t.length>=1&&t.length<=10,validateData(t){const{auth_uid:e,desc_id:n,created_at:a,updated_at:o,title:i,description:c,tags:l}=t,r=this.validateAuthUid(e);this.validateDescId(n);return{isAuthUidValid:r,isTitleValid:this.validateTitle(i),isDescriptionValid:this.validateDescription(c),areTagsValid:l.every((t=>this.validateTagName(t.name)))}}};function $(){console.log("auth_uid",p,"desc_id",i,"created_at",c,"updated_at",l,"title",r,"description",d,"tags",s);const t={auth_uid:p,desc_id:i,created_at:c,updated_at:l,title:r,description:d,tags:s};n(6,u=[]);for(const[e,n]of Object.entries(v.validateData(t)))if(n||u.push(e),"tags"===e)for(const[t,e]of n.entries())for(const[n,a]of Object.entries(v.validateData(e)))a||u.push(`tags[${t}].${n}`);else"auth_uid"===e&&v.validateAuthUid(p),"desc_id"===e&&v.validateDescId(i),"created_at"===e&&v.validateISODate(c),"updated_at"===e&&v.validateISODate(l),"title"===e&&v.validateTitle(r),"description"===e&&v.validateDescription(d);return!(u.length>0)||(console.log(u),!1)}async function T(){try{if(!$())throw new Error("Validation failed");const t=await fetch("http://localhost:8000/insert_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:p,created_at:c,updated_at:l,title:r,description:d,tags:s})}),e=await t.json();console.log(e)}catch(t){}}async function x(){try{const t=await fetch(ot+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:p})}),e=await t.json();n(8,g=e),n(1,o=e.allTags),e.any_user_new_allDescs_with_tags>0&&(console.log("any_user_new_allDescs_with_tags"),console.log(e.any_user_new_allDescs_with_tags),n(9,h=e.any_user_new_allDescs_with_tags)),console.log(e)}catch(t){console.error("Error:",t)}}async function w(t){try{const e=await fetch(ot+"/delete_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,auth_uid:p})}),n=await e.json();console.log(n)}catch(t){console.error("Error:",t)}}async function D(t,e){try{console.log(t,e,p);const n=await fetch(ot+"/delete_desc_tag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,desc_id:e,auth_uid:p})}),a=await n.json();console.log(a)}catch(t){console.error("Error:",t)}}firebase.initializeApp({apiKey:"AIzaSyBcOlIDP2KWbJuKM0WeMHNp-WvjTVfLt9Y",authDomain:"p2auth-ea50a.firebaseapp.com",projectId:"p2auth-ea50a",storageBucket:"p2auth-ea50a.appspot.com",messagingSenderId:"796225429484",appId:"1:796225429484:web:ece56ef2fc0be28cd6eac9"});const C=new firebase.auth.GoogleAuthProvider;b((async()=>{await x(),await async function(){try{await new Promise(((t,e)=>{firebase.auth().onAuthStateChanged(t,e)}))||n(7,f="Not logged in"),n(7,f="Logged in")}catch(t){console.error("Error during authentication:",t),n(7,f="Authentication failed"),n(10,p="")}}()}));return(async()=>{})(),[a,o,i,r,d,s,u,f,g,h,p,_,m,async function(){try{for(const t of y)n(10,p=t.auth_uid),n(2,i=t.desc_id),c=t.created_at,l=t.updated_at,n(3,r=t.title),n(4,d=t.description),n(5,s=t.tags),await T()}catch(t){console.error("Error:",t)}},T,x,async function(){try{if(console.log("fetch_update_desc"),console.log(p,i,c,l,r,d,s),!$())throw new Error("Validation failed");const t=await fetch(ot+"/update_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:p,desc_id:i,title:r,description:d,tags:s})}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}},w,D,async function(){try{const t=(await firebase.auth().signInWithPopup(C)).user;n(7,f=`Logged in as: ${t.displayName}`)}catch(t){console.error("Error during Google login:",t),alert("Google login failed. "+t.message)}},t=>m(t.id),t=>w(t.id),t=>D(t.id,t.desc_id),t=>m(t.id),t=>w(t.id),t=>D(t.id,t.desc_id),function(){r=this.value,n(3,r)},function(){d=this.value,n(4,d)},function(){a=this.value,n(0,a)},()=>_(i,a)]}return new class extends W{constructor(t){super(),P(this,t,ct,at,i,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
