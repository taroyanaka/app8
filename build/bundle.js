var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function g(){return u(" ")}function h(){return u("")}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}let v;function y(t){v=t}function b(t){(function(){if(!v)throw new Error("Function called outside component initialization");return v})().$$.on_mount.push(t)}const T=[],w=[];let $=[];const x=[],D=Promise.resolve();let C=!1;function E(t){$.push(t)}const S=new Set;let k=0;function O(){if(0!==k)return;const t=v;do{try{for(;k<T.length;){const t=T[k];k++,y(t),N(t.$$)}}catch(t){throw T.length=0,k=0,t}for(y(null),T.length=0,k=0;w.length;)w.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];S.has(e)||(S.add(e),e())}$.length=0}while(T.length);for(;x.length;)x.pop()();C=!1,S.clear(),y(t)}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const j=new Set;function I(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];$.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),$=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function A(t,e){-1===t.$$.dirty[0]&&(T.push(t),C||(C=!0,D.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(i,l,c,s,d,u,g,h=[-1]){const f=v;y(i);const _=i.$$={fragment:null,ctx:[],props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(f?f.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:l.target||f.$$.root};g&&g(_.root);let p=!1;if(_.ctx=c?c(i,l.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return _.ctx&&d(_.ctx[t],_.ctx[t]=o)&&(!_.skip_bound&&_.bound[t]&&_.bound[t](o),p&&A(i,t)),e})):[],_.update(),p=!0,o(_.before_update),_.fragment=!!s&&s(_.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);_.fragment&&_.fragment.l(t),t.forEach(r)}else _.fragment&&_.fragment.c();l.intro&&((m=i.$$.fragment)&&m.i&&(j.delete(m),m.i(b))),function(t,n,i,l){const{fragment:c,after_update:r}=t.$$;c&&c.m(n,i),l||E((()=>{const n=t.$$.on_mount.map(e).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),r.forEach(E)}(i,l.target,l.anchor,l.customElement),O()}var m,b;y(f)}class V{$destroy(){I(this,1),this.$destroy=t}$on(e,n){if(!a(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function W(t,e,n){const o=t.slice();return o[48]=e[n],o}function J(t,e,n){const o=t.slice();return o[48]=e[n],o}function q(t,e,n){const o=t.slice();return o[53]=e[n],o}function L(t,e,n){const o=t.slice();return o[48]=e[n],o}function z(t,e,n){const o=t.slice();return o[58]=e[n],o}function B(t,e,n){const o=t.slice();return o[48]=e[n],o}function G(t,e,n){const o=t.slice();return o[48]=e[n],o}function U(t,e,n){const o=t.slice();return o[58]=e[n],o}function K(t,e,n){const o=t.slice();return o[48]=e[n],o}function M(t,e,n){const o=t.slice();return o[53]=e[n],o}function Y(e){let n,o,a,i,s;return{c(){n=d("div"),o=u("auth_google_login: "),a=d("button"),a.textContent="auth_google_login"},m(t,r){c(t,n,r),l(n,o),l(n,a),i||(s=f(a,"click",e[20]),i=!0)},p:t,d(t){t&&r(n),i=!1,s()}}}function F(e){let n,o,a,i,s;return{c(){n=d("div"),o=u("auth_sign_out: "),a=d("button"),a.textContent="auth_sign_out"},m(t,r){c(t,n,r),l(n,o),l(n,a),i||(s=f(a,"click",e[21]),i=!0)},p:t,d(t){t&&r(n),i=!1,s()}}}function H(t){let e,n,o,a=t[6],i=[];for(let e=0;e<a.length;e+=1)i[e]=Z(M(t,a,e));return{c(){e=d("p"),e.textContent="Errors:",n=g();for(let t=0;t<i.length;t+=1)i[t].c();o=h()},m(t,a){c(t,e,a),c(t,n,a);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,a);c(t,o,a)},p(t,e){if(64&e[0]){let n;for(a=t[6],n=0;n<a.length;n+=1){const l=M(t,a,n);i[n]?i[n].p(l,e):(i[n]=Z(l),i[n].c(),i[n].m(o.parentNode,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=a.length}},d(t){t&&r(e),t&&r(n),s(i,t),t&&r(o)}}}function Z(t){let e,n,o=t[53]+"";return{c(){e=d("div"),n=u(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){64&e[0]&&o!==(o=t[53]+"")&&p(n,o)},d(t){t&&r(e)}}}function Q(t){let e,n=t[9],o=[];for(let e=0;e<n.length;e+=1)o[e]=X(U(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,a){if(397824&a[0]){let i;for(n=t[9],i=0;i<n.length;i+=1){const l=U(t,n,i);o[i]?o[i].p(l,a):(o[i]=X(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){s(o,t),t&&r(e)}}}function R(t){let e,n,o,a,i,s,h,m,v,y,b,T,w,$,x,D,C=t[48].id+"",E=t[48].desc_id+"",S=t[48].name+"";function k(){return t[25](t[48])}return{c(){e=d("div"),n=d("p"),o=u("id: "),a=u(C),i=g(),s=d("p"),h=u("desc_id: "),m=u(E),v=g(),y=d("p"),b=u("tag.name: "),T=u(S),w=g(),$=d("button"),$.textContent="delete_desc_tag",_(e,"class","desc_tag svelte-id7tb1")},m(t,r){c(t,e,r),l(e,n),l(n,o),l(n,a),l(e,i),l(e,s),l(s,h),l(s,m),l(e,v),l(e,y),l(y,b),l(y,T),l(e,w),l(e,$),x||(D=f($,"click",k),x=!0)},p(e,n){t=e,512&n[0]&&C!==(C=t[48].id+"")&&p(a,C),512&n[0]&&E!==(E=t[48].desc_id+"")&&p(m,E),512&n[0]&&S!==(S=t[48].name+"")&&p(T,S)},d(t){t&&r(e),x=!1,D()}}}function X(t){let e,n,a,i,h,_,m,v,y,b,T,w,$,x,D,C,E,S,k,O,N,j,I,A,P,V,W,J=t[58].id+"",q=t[58].auth_uid.slice(0,10)+"",L=t[58].title+"",z=t[58].description+"";function B(){return t[23](t[58])}function G(){return t[24](t[58])}let U=t[58].tags,M=[];for(let e=0;e<U.length;e+=1)M[e]=R(K(t,U,e));return{c(){e=d("div"),n=d("p"),a=u("id: "),i=u(J),h=g(),_=d("button"),_.textContent="set_desc_data",m=g(),v=d("button"),v.textContent="delete_desc",y=g(),b=d("p"),T=u("auth_uid: "),w=u(q),$=u("..."),x=g(),D=d("p"),C=u("title: "),E=u(L),S=g(),k=d("p"),O=u("description: "),N=u(z),j=g(),I=d("div"),I.textContent="tags:",A=g();for(let t=0;t<M.length;t+=1)M[t].c();P=g()},m(t,o){c(t,e,o),l(e,n),l(n,a),l(n,i),l(e,h),l(e,_),l(e,m),l(e,v),l(e,y),l(e,b),l(b,T),l(b,w),l(b,$),l(e,x),l(e,D),l(D,C),l(D,E),l(e,S),l(e,k),l(k,O),l(k,N),l(e,j),l(e,I),l(e,A);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(e,null);l(e,P),V||(W=[f(_,"click",B),f(v,"click",G)],V=!0)},p(n,o){if(t=n,512&o[0]&&J!==(J=t[58].id+"")&&p(i,J),512&o[0]&&q!==(q=t[58].auth_uid.slice(0,10)+"")&&p(w,q),512&o[0]&&L!==(L=t[58].title+"")&&p(E,L),512&o[0]&&z!==(z=t[58].description+"")&&p(N,z),262656&o[0]){let n;for(U=t[58].tags,n=0;n<U.length;n+=1){const a=K(t,U,n);M[n]?M[n].p(a,o):(M[n]=R(a),M[n].c(),M[n].m(e,P))}for(;n<M.length;n+=1)M[n].d(1);M.length=U.length}},d(t){t&&r(e),s(M,t),V=!1,o(W)}}}function tt(t){let e,n=t[8].allDescs,o=[];for(let e=0;e<n.length;e+=1)o[e]=ot(z(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,a){if(921859&a[0]){let i;for(n=t[8].allDescs,i=0;i<n.length;i+=1){const l=z(t,n,i);o[i]?o[i].p(l,a):(o[i]=ot(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){s(o,t),t&&r(e)}}}function et(t){let e,n;return{c(){e=d("option"),e.__value=n=t[48].name,e.value=e.__value},m(t,n){c(t,e,n)},p(t,o){2&o[0]&&n!==(n=t[48].name)&&(e.__value=n,e.value=e.__value)},d(t){t&&r(e)}}}function nt(t){let e,n,o,a,i,s=t[48].name+"";function g(){return t[30](t[48])}return{c(){e=d("div"),n=d("button"),o=u(s),_(e,"class","desc_tag svelte-id7tb1")},m(t,r){c(t,e,r),l(e,n),l(n,o),a||(i=f(n,"click",g),a=!0)},p(e,n){t=e,256&n[0]&&s!==(s=t[48].name+"")&&p(o,s)},d(t){t&&r(e),a=!1,i()}}}function ot(t){let e,n,a,i,h,v,y,b,T,w,$,x,D,C,E,S,k,O,N,j,I,A,P,V,W,J,q,L,z,U,K,M,Y,F=t[58].id+"",H=t[58].auth_uid.slice(0,10)+"",Z=t[58].title+"",Q=t[58].description+"";function R(){return t[26](t[58])}function X(){return t[27](t[58])}function tt(){return t[28](t[58])}let ot=t[1],at=[];for(let e=0;e<ot.length;e+=1)at[e]=et(G(t,ot,e));let it=t[58].tags,lt=[];for(let e=0;e<it.length;e+=1)lt[e]=nt(B(t,it,e));return{c(){e=d("div"),n=d("p"),a=u("id: "),i=u(F),h=g(),v=d("button"),v.textContent="set_desc_data",y=g(),b=d("button"),b.textContent="delete_desc",T=g(),w=d("p"),$=u("auth_uid: "),x=u(H),D=u("..."),C=g(),E=d("p"),S=u("title: "),k=u(Z),O=g(),N=d("p"),j=u("description: "),I=u(Q),A=g(),P=d("div"),V=u("tags:\n\t\t\t\t\t\t"),W=d("button"),W.textContent="add_tag_to_desc",J=g(),q=d("input"),L=g(),z=d("datalist");for(let t=0;t<at.length;t+=1)at[t].c();U=u("\n\t\t\t\t\tdelete_tag\n\t\t\t\t\t");for(let t=0;t<lt.length;t+=1)lt[t].c();K=g(),_(q,"list","all_tags"),_(q,"id","my_all_tags"),_(q,"name","my_all_tags"),_(q,"minlength","1"),_(q,"maxlength","10"),q.required=!0,_(q,"placeholder","1_10"),_(z,"id","all_tags")},m(o,r){c(o,e,r),l(e,n),l(n,a),l(n,i),l(e,h),l(e,v),l(e,y),l(e,b),l(e,T),l(e,w),l(w,$),l(w,x),l(w,D),l(e,C),l(e,E),l(E,S),l(E,k),l(e,O),l(e,N),l(N,j),l(N,I),l(e,A),l(e,P),l(P,V),l(P,W),l(e,J),l(e,q),m(q,t[0]),l(e,L),l(e,z);for(let t=0;t<at.length;t+=1)at[t]&&at[t].m(z,null);l(e,U);for(let t=0;t<lt.length;t+=1)lt[t]&&lt[t].m(e,null);l(e,K),M||(Y=[f(v,"click",R),f(b,"click",X),f(W,"click",tt),f(q,"input",t[29])],M=!0)},p(n,o){if(t=n,256&o[0]&&F!==(F=t[58].id+"")&&p(i,F),256&o[0]&&H!==(H=t[58].auth_uid.slice(0,10)+"")&&p(x,H),256&o[0]&&Z!==(Z=t[58].title+"")&&p(k,Z),256&o[0]&&Q!==(Q=t[58].description+"")&&p(I,Q),1&o[0]&&q.value!==t[0]&&m(q,t[0]),2&o[0]){let e;for(ot=t[1],e=0;e<ot.length;e+=1){const n=G(t,ot,e);at[e]?at[e].p(n,o):(at[e]=et(n),at[e].c(),at[e].m(z,null))}for(;e<at.length;e+=1)at[e].d(1);at.length=ot.length}if(262400&o[0]){let n;for(it=t[58].tags,n=0;n<it.length;n+=1){const a=B(t,it,n);lt[n]?lt[n].p(a,o):(lt[n]=nt(a),lt[n].c(),lt[n].m(e,K))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=it.length}},d(t){t&&r(e),s(at,t),s(lt,t),M=!1,o(Y)}}}function at(t){let e,n=t[8].allTags,o=[];for(let e=0;e<n.length;e+=1)o[e]=it(L(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,a){if(256&a[0]){let i;for(n=t[8].allTags,i=0;i<n.length;i+=1){const l=L(t,n,i);o[i]?o[i].p(l,a):(o[i]=it(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){s(o,t),t&&r(e)}}}function it(t){let e,n,o,a,i,s,h,f,_,m=t[48].id+"",v=t[48].name+"";return{c(){e=d("div"),n=d("p"),o=u("id: "),a=u(m),i=g(),s=d("p"),h=u("tag.name: "),f=u(v),_=g()},m(t,r){c(t,e,r),l(e,n),l(n,o),l(n,a),l(e,i),l(e,s),l(s,h),l(s,f),l(e,_)},p(t,e){256&e[0]&&m!==(m=t[48].id+"")&&p(a,m),256&e[0]&&v!==(v=t[48].name+"")&&p(f,v)},d(t){t&&r(e)}}}function lt(t){let e,n,o,a=t[6],i=[];for(let e=0;e<a.length;e+=1)i[e]=ct(q(t,a,e));return{c(){e=d("h2"),e.textContent="errors",n=g();for(let t=0;t<i.length;t+=1)i[t].c();o=h()},m(t,a){c(t,e,a),c(t,n,a);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,a);c(t,o,a)},p(t,e){if(64&e[0]){let n;for(a=t[6],n=0;n<a.length;n+=1){const l=q(t,a,n);i[n]?i[n].p(l,e):(i[n]=ct(l),i[n].c(),i[n].m(o.parentNode,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=a.length}},d(t){t&&r(e),t&&r(n),s(i,t),t&&r(o)}}}function ct(t){let e,n,o=t[53]+"";return{c(){e=d("p"),n=u(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){64&e[0]&&o!==(o=t[53]+"")&&p(n,o)},d(t){t&&r(e)}}}function rt(t){let e,n,a,i,h,v,y,b,T,w,$,x,D,C,E,S,k,O,N,j,I,A,P,V,q,L,z,B,G,U,K,M=t[10].slice(0,10)+"",Y=t[5],F=[];for(let e=0;e<Y.length;e+=1)F[e]=st(J(t,Y,e));let H=t[1],Z=[];for(let e=0;e<H.length;e+=1)Z[e]=dt(W(t,H,e));return{c(){e=d("button"),e.textContent="update_desc",n=u("\n\t\t\n\t\t\n\t\t\n\t\t \n\t\tauth_uid: "),a=d("p"),i=u(M),h=u("..."),v=g(),y=d("p"),b=u("id: "),T=u(t[2]),w=g(),$=d("div"),$.textContent="title:",x=g(),D=d("textarea"),C=g(),E=d("div"),E.textContent="description:",S=g(),k=d("textarea"),O=g(),N=d("div");for(let t=0;t<F.length;t+=1)F[t].c();j=g(),I=d("label"),I.textContent="tag",A=g(),P=d("input"),V=g(),q=d("datalist");for(let t=0;t<Z.length;t+=1)Z[t].c();L=g(),z=d("button"),z.textContent="add_tag_to_desc",B=g(),G=d("button"),G.textContent="insert_desc",_(D,"class","title svelte-id7tb1"),_(D,"minlength","1"),_(D,"maxlength","100"),D.required=!0,_(D,"placeholder","1_100"),_(k,"class","description svelte-id7tb1"),_(k,"minlength","1"),_(k,"maxlength","1000"),k.required=!0,_(k,"placeholder","1_1000"),_(I,"for","my_all_tags"),_(P,"list","all_tags"),_(P,"id","my_all_tags"),_(P,"name","my_all_tags"),_(P,"minlength","1"),_(P,"maxlength","10"),P.required=!0,_(P,"placeholder","1_10"),_(q,"id","all_tags"),_(G,"class","fetch_insert_desc_button svelte-id7tb1")},m(o,r){c(o,e,r),c(o,n,r),c(o,a,r),l(a,i),l(a,h),c(o,v,r),c(o,y,r),l(y,b),l(y,T),c(o,w,r),c(o,$,r),c(o,x,r),c(o,D,r),m(D,t[3]),c(o,C,r),c(o,E,r),c(o,S,r),c(o,k,r),m(k,t[4]),c(o,O,r),c(o,N,r);for(let t=0;t<F.length;t+=1)F[t]&&F[t].m(N,null);c(o,j,r),c(o,I,r),c(o,A,r),c(o,P,r),m(P,t[0]),c(o,V,r),c(o,q,r);for(let t=0;t<Z.length;t+=1)Z[t]&&Z[t].m(q,null);c(o,L,r),c(o,z,r),c(o,B,r),c(o,G,r),U||(K=[f(e,"click",t[16]),f(D,"input",t[31]),f(k,"input",t[32]),f(P,"input",t[34]),f(z,"click",t[35]),f(G,"click",t[14])],U=!0)},p(t,e){if(1024&e[0]&&M!==(M=t[10].slice(0,10)+"")&&p(i,M),4&e[0]&&p(T,t[2]),8&e[0]&&m(D,t[3]),16&e[0]&&m(k,t[4]),32&e[0]){let n;for(Y=t[5],n=0;n<Y.length;n+=1){const o=J(t,Y,n);F[n]?F[n].p(o,e):(F[n]=st(o),F[n].c(),F[n].m(N,null))}for(;n<F.length;n+=1)F[n].d(1);F.length=Y.length}if(1&e[0]&&P.value!==t[0]&&m(P,t[0]),2&e[0]){let n;for(H=t[1],n=0;n<H.length;n+=1){const o=W(t,H,n);Z[n]?Z[n].p(o,e):(Z[n]=dt(o),Z[n].c(),Z[n].m(q,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=H.length}},d(t){t&&r(e),t&&r(n),t&&r(a),t&&r(v),t&&r(y),t&&r(w),t&&r($),t&&r(x),t&&r(D),t&&r(C),t&&r(E),t&&r(S),t&&r(k),t&&r(O),t&&r(N),s(F,t),t&&r(j),t&&r(I),t&&r(A),t&&r(P),t&&r(V),t&&r(q),s(Z,t),t&&r(L),t&&r(z),t&&r(B),t&&r(G),U=!1,o(K)}}}function st(t){let e,n,o,a,i=t[48].name+"";function s(){return t[33](t[48])}return{c(){e=d("button"),n=u(i)},m(t,i){c(t,e,i),l(e,n),o||(a=f(e,"click",s),o=!0)},p(e,o){t=e,32&o[0]&&i!==(i=t[48].name+"")&&p(n,i)},d(t){t&&r(e),o=!1,a()}}}function dt(t){let e,n;return{c(){e=d("option"),e.__value=n=t[48].name,e.value=e.__value},m(t,n){c(t,e,n)},p(t,o){2&o[0]&&n!==(n=t[48].name)&&(e.__value=n,e.value=e.__value)},d(t){t&&r(e)}}}function ut(e){let n,a,i,s,h,m,v,y,b,T,w,$,x,D,C,E,S,k,O,N,j,I,A,P,V,W,J,q,L,z,B,G,U,K,M,Z,R,X,et,nt,ot,it,ct,st,dt,ut=""===e[10]&&Y(e),gt=""!==e[10]&&F(e),ft=e[6]>0&&H(e),_t=e[9].length>0&&Q(e),pt=e[8].allDescs&&tt(e),mt=e[8].allTags&&at(e),vt=e[6].length>0&&lt(e),yt=""!==e[10]&&rt(e);return{c(){n=d("div"),a=d("div"),i=d("div"),s=d("div"),s.textContent="v1.0.1",h=g(),m=d("div"),v=u("auth_uid: "),y=u(e[10]),b=g(),T=d("div"),w=u("auth_login_result: "),$=d("span"),x=u(e[7]),D=g(),ut&&ut.c(),C=g(),gt&&gt.c(),E=g(),S=d("button"),S.textContent="runBoundaryTests",k=g(),O=d("button"),O.textContent="init_and_sample_insert",N=g(),j=d("button"),j.textContent="init_db",I=g(),A=d("button"),A.textContent="get_all_descs_and_tags",P=g(),V=d("div"),W=d("div"),J=d("div"),ft&&ft.c(),q=g(),L=d("div"),z=d("h1"),z.textContent="Your Web Data Descs",B=g(),_t&&_t.c(),G=g(),U=d("h1"),U.textContent="Web Data Descs",K=g(),pt&&pt.c(),M=g(),Z=d("div"),R=d("h1"),R.textContent="Web Data Tags",X=g(),mt&&mt.c(),et=g(),nt=d("div"),vt&&vt.c(),ot=g(),it=d("h1"),it.textContent="Web Data Edit",ct=g(),yt&&yt.c(),_(s,"class","version"),_(a,"class","header svelte-id7tb1"),_(J,"class","console"),_(L,"class","list"),_(Z,"class","list2"),_(W,"class","left-column server_side svelte-id7tb1"),_(nt,"class","right-column svelte-id7tb1"),_(V,"class","content svelte-id7tb1"),_(n,"class","container svelte-id7tb1")},m(t,o){c(t,n,o),l(n,a),l(a,i),l(i,s),l(i,h),l(i,m),l(m,v),l(m,y),l(i,b),l(i,T),l(T,w),l(T,$),l($,x),l(i,D),ut&&ut.m(i,null),l(i,C),gt&&gt.m(i,null),l(a,E),l(a,S),l(a,k),l(a,O),l(a,N),l(a,j),l(a,I),l(a,A),l(n,P),l(n,V),l(V,W),l(W,J),ft&&ft.m(J,null),l(W,q),l(W,L),l(L,z),l(L,B),_t&&_t.m(L,null),l(L,G),l(L,U),l(L,K),pt&&pt.m(L,null),l(W,M),l(W,Z),l(Z,R),l(Z,X),mt&&mt.m(Z,null),l(V,et),l(V,nt),vt&&vt.m(nt,null),l(nt,ot),l(nt,it),l(nt,ct),yt&&yt.m(nt,null),st||(dt=[f(S,"click",e[22]),f(O,"click",e[13]),f(j,"click",ht),f(A,"click",e[15])],st=!0)},p(t,e){1024&e[0]&&p(y,t[10]),128&e[0]&&p(x,t[7]),""===t[10]?ut?ut.p(t,e):(ut=Y(t),ut.c(),ut.m(i,C)):ut&&(ut.d(1),ut=null),""!==t[10]?gt?gt.p(t,e):(gt=F(t),gt.c(),gt.m(i,null)):gt&&(gt.d(1),gt=null),t[6]>0?ft?ft.p(t,e):(ft=H(t),ft.c(),ft.m(J,null)):ft&&(ft.d(1),ft=null),t[9].length>0?_t?_t.p(t,e):(_t=Q(t),_t.c(),_t.m(L,G)):_t&&(_t.d(1),_t=null),t[8].allDescs?pt?pt.p(t,e):(pt=tt(t),pt.c(),pt.m(L,null)):pt&&(pt.d(1),pt=null),t[8].allTags?mt?mt.p(t,e):(mt=at(t),mt.c(),mt.m(Z,null)):mt&&(mt.d(1),mt=null),t[6].length>0?vt?vt.p(t,e):(vt=lt(t),vt.c(),vt.m(nt,ot)):vt&&(vt.d(1),vt=null),""!==t[10]?yt?yt.p(t,e):(yt=rt(t),yt.c(),yt.m(nt,null)):yt&&(yt.d(1),yt=null)},i:t,o:t,d(t){t&&r(n),ut&&ut.d(),gt&&gt.d(),ft&&ft.d(),_t&&_t.d(),pt&&pt.d(),mt&&mt.d(),vt&&vt.d(),yt&&yt.d(),st=!1,o(dt)}}}let gt="http://localhost:8000";async function ht(){try{const t=await fetch(gt+"/init_db",{method:"POST",headers:{"Content-Type":"application/json"}}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}}function ft(t,e,n){let o="",a=[],i=null,l=(new Date).toISOString(),c=(new Date).toISOString(),r="",s="",d=[],u=[],g="Not logged in",h=[],f=[],_="";function p(t,e){try{const i=a.find((t=>t.name===e));if(i){i.desc_id=t;const e=d.some((t=>t.id==t.id));e||n(5,d=[...d,i]),n(0,o="")}else{const o={id:a.length+1,name:e,desc_id:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};n(1,a=[...a,o]),n(5,d=[...d,o])}}catch(t){console.error("Error:",t)}}function m(t){try{const e=h.allDescs.find((e=>e.id===t));console.log(e.tags),e?(n(10,_=e.auth_uid),n(2,i=e.id),l=e.created_at,c=e.updated_at,n(3,r=e.title),n(4,s=e.description),n(5,d=e.tags)):console.error(`No description found with id: ${t}`)}catch(t){console.error("Error:",t)}}const v={validateAuthUid:t=>/^[a-zA-Z0-9_-]+$/.test(t),validateDescId:t=>(console.log("validateDescId",t),Number.isInteger(t)&&t>0),validateISODate:t=>/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(t),validateTitle:t=>(console.log("validateTitle",t),"string"==typeof t&&t.length>=1&&t.length<=100),validateDescription:t=>(console.log("validateDescription",t),"string"==typeof t&&t.length>=1&&t.length<=1e3),validateTagName:t=>"string"==typeof t&&t.length>=1&&t.length<=10,validateData(t){const{auth_uid:e,desc_id:n,created_at:o,updated_at:a,title:i,description:l,tags:c}=t,r=this.validateAuthUid(e);this.validateDescId(n);return{isAuthUidValid:r,isTitleValid:this.validateTitle(i),isDescriptionValid:this.validateDescription(l),areTagsValid:c.every((t=>this.validateTagName(t.name)))}}};function y(){console.log("auth_uid",_,"desc_id",i,"title",r,"description",s,"tags",d);const t={auth_uid:_,desc_id:i,title:r,description:s,tags:d};n(6,u=[]);for(const[e,n]of Object.entries(v.validateData(t)))if(n||u.push(e),"tags"===e)for(const[t,e]of n.entries())for(const[n,o]of Object.entries(v.validateData(e)))o||u.push(`tags[${t}].${n}`);else"auth_uid"===e&&v.validateAuthUid(_),"desc_id"===e&&v.validateDescId(i),"title"===e&&v.validateTitle(r),"description"===e&&v.validateDescription(s);return!(u.length>0)||(console.log(u),!1)}async function T(){try{if(!y())throw new Error("Validation failed");const t=await fetch("http://localhost:8000/insert_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:_,title:r,description:s,tags:d})}),e=await t.json();console.log(e)}catch(t){}}async function w(){try{const t=await fetch(gt+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:_})}),e=await t.json();n(8,h=e),n(1,a=e.allTags),console.log(1),h.any_user_new_allDescs_with_tags.length>0&&(console.log(2),console.log("any_user_new_allDescs_with_tags"),console.log(e.any_user_new_allDescs_with_tags),n(9,f=e.any_user_new_allDescs_with_tags)),console.log(e)}catch(t){console.error("Error:",t)}}async function $(t){try{const e=await fetch(gt+"/delete_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,auth_uid:_})}),n=await e.json();console.log(n)}catch(t){console.error("Error:",t)}}async function x(t,e){try{console.log(t,e,_);const n=await fetch(gt+"/delete_desc_tag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,desc_id:e,auth_uid:_})}),o=await n.json();console.log(o)}catch(t){console.error("Error:",t)}}async function D(t,e){try{if(console.log(t,e,1),!v.validateTagName(e))throw new Error("Validation failed");console.log(t,e,2);const n=await fetch(gt+"/insert_desc_tag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({desc_id:t,name:e})});console.log(t,e,3);const o=await n.json();console.log(o),await w()}catch(t){console.error("Error:",t)}}firebase.initializeApp({apiKey:"AIzaSyBcOlIDP2KWbJuKM0WeMHNp-WvjTVfLt9Y",authDomain:"p2auth-ea50a.firebaseapp.com",projectId:"p2auth-ea50a",storageBucket:"p2auth-ea50a.appspot.com",messagingSenderId:"796225429484",appId:"1:796225429484:web:ece56ef2fc0be28cd6eac9"});const C=new firebase.auth.GoogleAuthProvider;const E=[{auth_uid:"user1",desc_id:1,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo1",description:"bar1",tags:[{desc_id:1,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:2,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo2",description:"bar2",tags:[{desc_id:2,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:2,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user2",desc_id:3,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo3",description:"bar3",tags:[{desc_id:3,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:3,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}],S=[{auth_uid:"user1",desc_id:4,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"a".repeat(100),description:"b".repeat(1e3),tags:[{desc_id:4,id:4,name:"tag4",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:5,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"",description:"",tags:[{desc_id:5,id:5,name:"t".repeat(10),created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}];b((async()=>{await async function(){try{console.log("auth_check_login");const t=await new Promise(((t,e)=>{firebase.auth().onAuthStateChanged(t,e)}));console.log("Current user:",t),t?(n(10,_=t.uid),console.log(1),n(7,g="Logged in")):(console.log(2),n(7,g="Not logged in"),n(10,_=""))}catch(t){console.error("Error during authentication:",t),n(7,g="Authentication failed"),n(10,_="")}}(),await w()}));return(async()=>{})(),[o,a,i,r,s,d,u,g,h,f,_,p,m,async function(){try{for(const t of E)n(10,_=t.auth_uid),n(2,i=t.desc_id),l=t.created_at,c=t.updated_at,n(3,r=t.title),n(4,s=t.description),n(5,d=t.tags),await T()}catch(t){console.error("Error:",t)}},T,w,async function(){try{if(console.log("fetch_update_desc"),console.log(_,i,l,c,r,s,d),!y())throw new Error("Validation failed");const t=await fetch(gt+"/update_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:_,desc_id:i,title:r,description:s,tags:d})}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}},$,x,D,async function(){try{console.log("auth_google_login");const t=(await firebase.auth().signInWithPopup(C)).user;console.log(4),n(7,g=`Logged in as: ${t.displayName}`)}catch(t){console.error("Error during Google login:",t),alert("Google login failed. "+t.message)}},async function(){try{console.log(5),await firebase.auth().signOut(),n(7,g="Not logged in"),await async function(){try{const t=await fetch(gt+"/",{method:"GET"});n(8,h=await t.json())}catch(t){console.error("Error fetching data:",t)}}()}catch(t){console.error("Error during sign-out:",t),alert("Sign out failed. "+t.message)}},function(){S.forEach((t=>{console.log(v.validateData(t).isTitleValid===t.title.length>=1&&t.title.length<=100),console.log(v.validateData(t).isDescriptionValid===t.description.length>=1&&t.description.length<=1e3),console.log(v.validateData(t).areTagsValid===t.tags.every((t=>t.name.length>=1&&t.name.length<=10)))}))},t=>m(t.id),t=>$(t.id),t=>x(t.id,t.desc_id),t=>m(t.id),t=>$(t.id),t=>D(t.id,o),function(){o=this.value,n(0,o)},t=>x(t.id,t.desc_id),function(){r=this.value,n(3,r)},function(){s=this.value,n(4,s)},t=>n(5,d=d.filter((e=>e.id!==t.id))),function(){o=this.value,n(0,o)},()=>p(i,o)]}return new class extends V{constructor(t){super(),P(this,t,ft,ut,i,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
