var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function h(){return u("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}let b;function v(t){b=t}function y(t){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_mount.push(t)}const T=[],$=[];let D=[];const w=[],x=Promise.resolve();let z=!1;function C(t){D.push(t)}const k=new Set;let E=0;function N(){if(0!==E)return;const t=b;do{try{for(;E<T.length;){const t=T[E];E++,v(t),O(t.$$)}}catch(t){throw T.length=0,E=0,t}for(v(null),T.length=0,E=0;$.length;)$.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];k.has(e)||(k.add(e),e())}D.length=0}while(T.length);for(;w.length;)w.pop()();z=!1,k.clear(),v(t)}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const S=new Set;function W(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];D.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),D=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(T.push(t),z||(z=!0,x.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(a,l,c,s,d,u,f,h=[-1]){const g=b;v(a);const p=a.$$={fragment:null,ctx:[],props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(g?g.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:l.target||g.$$.root};f&&f(p.root);let _=!1;if(p.ctx=c?c(a,l.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return p.ctx&&d(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),_&&j(a,t)),e})):[],p.update(),_=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);p.fragment&&p.fragment.l(t),t.forEach(r)}else p.fragment&&p.fragment.c();l.intro&&((m=a.$$.fragment)&&m.i&&(S.delete(m),m.i(y))),function(t,n,a,l){const{fragment:c,after_update:r}=t.$$;c&&c.m(n,a),l||C((()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),r.forEach(C)}(a,l.target,l.anchor,l.customElement),N()}var m,y;v(g)}class I{$destroy(){W(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function P(t,e,n){const o=t.slice();return o[46]=e[n],o}function F(t,e,n){const o=t.slice();return o[46]=e[n],o}function V(t,e,n){const o=t.slice();return o[51]=e[n],o}function L(t,e,n){const o=t.slice();return o[46]=e[n],o}function J(t,e,n){const o=t.slice();return o[56]=e[n],o}function q(t,e,n){const o=t.slice();return o[59]=e[n],o}function B(t,e,n){const o=t.slice();return o[46]=e[n],o}function G(t,e,n){const o=t.slice();return o[51]=e[n],o}function U(e){let n,o,i,a,s;return{c(){n=d("div"),o=u("auth_google_login: "),i=d("button"),i.textContent="auth_google_login"},m(t,r){c(t,n,r),l(n,o),l(n,i),a||(s=g(i,"click",e[20]),a=!0)},p:t,d(t){t&&r(n),a=!1,s()}}}function Y(e){let n,o,i,a,s;return{c(){n=d("div"),o=u("auth_sign_out: "),i=d("button"),i.textContent="auth_sign_out"},m(t,r){c(t,n,r),l(n,o),l(n,i),a||(s=g(i,"click",e[21]),a=!0)},p:t,d(t){t&&r(n),a=!1,s()}}}function K(t){let e,n,o,i=t[7],a=[];for(let e=0;e<i.length;e+=1)a[e]=M(G(t,i,e));return{c(){e=d("p"),e.textContent="Errors:",n=f();for(let t=0;t<a.length;t+=1)a[t].c();o=h()},m(t,i){c(t,e,i),c(t,n,i);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,i);c(t,o,i)},p(t,e){if(128&e[0]){let n;for(i=t[7],n=0;n<i.length;n+=1){const l=G(t,i,n);a[n]?a[n].p(l,e):(a[n]=M(l),a[n].c(),a[n].m(o.parentNode,o))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(t){t&&r(e),t&&r(n),s(a,t),t&&r(o)}}}function M(t){let e,n,o=t[51]+"";return{c(){e=d("div"),n=u(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){128&e[0]&&o!==(o=t[51]+"")&&_(n,o)},d(t){t&&r(e)}}}function H(e){let n,o,i;return{c(){n=d("button"),n.textContent="clear_filtered_allDescs"},m(t,a){c(t,n,a),o||(i=g(n,"click",e[14]),o=!0)},p:t,d(t){t&&r(n),o=!1,i()}}}function Z(t){let e,n=t[56].descs,o=[];for(let e=0;e<n.length;e+=1)o[e]=R(q(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,i){if(536577&i[0]){let a;for(n=t[56].descs,a=0;a<n.length;a+=1){const l=q(t,n,a);o[a]?o[a].p(l,i):(o[a]=R(l),o[a].c(),o[a].m(e.parentNode,e))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(t){s(o,t),t&&r(e)}}}function Q(t){let e,n,o,i,a=t[46].name+"";function s(){return t[25](t[46])}return{c(){e=d("button"),n=u(a)},m(t,a){c(t,e,a),l(e,n),o||(i=g(e,"click",s),o=!0)},p(e,o){t=e,1&o[0]&&a!==(a=t[46].name+"")&&_(n,a)},d(t){t&&r(e),o=!1,i()}}}function R(t){let e,n,i,a,h,m,b,v,y,T,$,D,w,x,z,C,k,E,N,O,S,W,j,A,I,P,F,V=t[59].id+"",L=t[59].auth_uid.slice(0,10)+"",J=t[59].title+"",q=t[59].description+"";function G(){return t[23](t[59])}function U(){return t[24](t[59])}let Y=t[59].tags,K=[];for(let e=0;e<Y.length;e+=1)K[e]=Q(B(t,Y,e));return{c(){e=d("div"),n=d("p"),i=u("id: "),a=u(V),h=f(),m=d("button"),m.textContent="set_desc_data",b=f(),v=d("button"),v.textContent="delete_desc",y=f(),T=d("p"),$=u("auth_uid: "),D=u(L),w=u("..."),x=f(),z=d("p"),C=u("title: "),k=u(J),E=f(),N=d("p"),O=u("description: "),S=u(q),W=f(),j=d("div"),j.textContent="tags:",A=f();for(let t=0;t<K.length;t+=1)K[t].c();I=f(),p(z,"class","break_word svelte-zzthcz"),p(N,"class","break_word svelte-zzthcz")},m(t,o){c(t,e,o),l(e,n),l(n,i),l(n,a),l(e,h),l(e,m),l(e,b),l(e,v),l(e,y),l(e,T),l(T,$),l(T,D),l(T,w),l(e,x),l(e,z),l(z,C),l(z,k),l(e,E),l(e,N),l(N,O),l(N,S),l(e,W),l(e,j),l(e,A);for(let t=0;t<K.length;t+=1)K[t]&&K[t].m(e,null);l(e,I),P||(F=[g(m,"click",G),g(v,"click",U)],P=!0)},p(n,o){if(t=n,1&o[0]&&V!==(V=t[59].id+"")&&_(a,V),1&o[0]&&L!==(L=t[59].auth_uid.slice(0,10)+"")&&_(D,L),1&o[0]&&J!==(J=t[59].title+"")&&_(k,J),1&o[0]&&q!==(q=t[59].description+"")&&_(S,q),8193&o[0]){let n;for(Y=t[59].tags,n=0;n<Y.length;n+=1){const i=B(t,Y,n);K[n]?K[n].p(i,o):(K[n]=Q(i),K[n].c(),K[n].m(e,I))}for(;n<K.length;n+=1)K[n].d(1);K.length=Y.length}},d(t){t&&r(e),s(K,t),P=!1,o(F)}}}function X(t){let e,n,o,i,a,s=t[56].title+"",g="Filter Web Data Descs"===t[56].title&&H(t),p=t[56].descs&&Z(t);return{c(){e=d("h1"),n=u(s),o=f(),g&&g.c(),i=f(),p&&p.c(),a=h()},m(t,r){c(t,e,r),l(e,n),c(t,o,r),g&&g.m(t,r),c(t,i,r),p&&p.m(t,r),c(t,a,r)},p(t,e){1&e[0]&&s!==(s=t[56].title+"")&&_(n,s),"Filter Web Data Descs"===t[56].title?g?g.p(t,e):(g=H(t),g.c(),g.m(i.parentNode,i)):g&&(g.d(1),g=null),t[56].descs?p?p.p(t,e):(p=Z(t),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},d(t){t&&r(e),t&&r(o),g&&g.d(t),t&&r(i),p&&p.d(t),t&&r(a)}}}function tt(t){let e,n=t[9].allTags,o=[];for(let e=0;e<n.length;e+=1)o[e]=et(L(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=h()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,i){if(8704&i[0]){let a;for(n=t[9].allTags,a=0;a<n.length;a+=1){const l=L(t,n,a);o[a]?o[a].p(l,i):(o[a]=et(l),o[a].c(),o[a].m(e.parentNode,e))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(t){s(o,t),t&&r(e)}}}function et(t){let e,n,o,i,a,s=t[46].name+"";function h(){return t[26](t[46])}return{c(){e=d("button"),n=u(s),o=f()},m(t,r){c(t,e,r),l(e,n),c(t,o,r),i||(a=g(e,"click",h),i=!0)},p(e,o){t=e,512&o[0]&&s!==(s=t[46].name+"")&&_(n,s)},d(t){t&&r(e),t&&r(o),i=!1,a()}}}function nt(t){let e,n,o,i=t[7],a=[];for(let e=0;e<i.length;e+=1)a[e]=ot(V(t,i,e));return{c(){e=d("h2"),e.textContent="errors",n=f();for(let t=0;t<a.length;t+=1)a[t].c();o=h()},m(t,i){c(t,e,i),c(t,n,i);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,i);c(t,o,i)},p(t,e){if(128&e[0]){let n;for(i=t[7],n=0;n<i.length;n+=1){const l=V(t,i,n);a[n]?a[n].p(l,e):(a[n]=ot(l),a[n].c(),a[n].m(o.parentNode,o))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(t){t&&r(e),t&&r(n),s(a,t),t&&r(o)}}}function ot(t){let e,n,o=t[51]+"";return{c(){e=d("p"),n=u(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){128&e[0]&&o!==(o=t[51]+"")&&_(n,o)},d(t){t&&r(e)}}}function it(t){let e,n,i,a,h,b,v,y,T,$,D,w,x,z,C,k,E,N,O,S,W,j,A,I,V,L,J,q,B,G,U,Y=t[10].slice(0,10)+"",K=t[6],M=[];for(let e=0;e<K.length;e+=1)M[e]=at(F(t,K,e));let H=t[2],Z=[];for(let e=0;e<H.length;e+=1)Z[e]=lt(P(t,H,e));return{c(){e=d("button"),e.textContent="update_desc",n=u("\n\t\tauth_uid: "),i=d("p"),a=u(Y),h=u("..."),b=f(),v=d("p"),y=u("id: "),T=u(t[3]),$=f(),D=d("div"),D.textContent="title:",w=f(),x=d("textarea"),z=f(),C=d("div"),C.textContent="description:",k=f(),E=d("textarea"),N=f(),O=d("div");for(let t=0;t<M.length;t+=1)M[t].c();S=f(),W=d("label"),W.textContent="tag",j=f(),A=d("input"),I=f(),V=d("datalist");for(let t=0;t<Z.length;t+=1)Z[t].c();L=f(),J=d("button"),J.textContent="add_tag_to_desc",q=f(),B=d("button"),B.textContent="insert_desc",p(x,"class","title svelte-zzthcz"),p(x,"minlength","1"),p(x,"maxlength","100"),x.required=!0,p(x,"placeholder","1_100"),p(E,"class","description svelte-zzthcz"),p(E,"minlength","1"),p(E,"maxlength","1000"),E.required=!0,p(E,"placeholder","1_1000"),p(W,"for","my_all_tags"),p(A,"list","all_tags"),p(A,"id","my_all_tags"),p(A,"name","my_all_tags"),p(A,"minlength","1"),p(A,"maxlength","10"),A.required=!0,p(A,"placeholder","1_10"),p(V,"id","all_tags"),p(B,"class","fetch_insert_desc_button svelte-zzthcz")},m(o,r){c(o,e,r),c(o,n,r),c(o,i,r),l(i,a),l(i,h),c(o,b,r),c(o,v,r),l(v,y),l(v,T),c(o,$,r),c(o,D,r),c(o,w,r),c(o,x,r),m(x,t[4]),c(o,z,r),c(o,C,r),c(o,k,r),c(o,E,r),m(E,t[5]),c(o,N,r),c(o,O,r);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(O,null);c(o,S,r),c(o,W,r),c(o,j,r),c(o,A,r),m(A,t[1]),c(o,I,r),c(o,V,r);for(let t=0;t<Z.length;t+=1)Z[t]&&Z[t].m(V,null);c(o,L,r),c(o,J,r),c(o,q,r),c(o,B,r),G||(U=[g(e,"click",t[18]),g(x,"input",t[27]),g(E,"input",t[28]),g(A,"input",t[30]),g(J,"click",t[31]),g(B,"click",t[16])],G=!0)},p(t,e){if(1024&e[0]&&Y!==(Y=t[10].slice(0,10)+"")&&_(a,Y),8&e[0]&&_(T,t[3]),16&e[0]&&m(x,t[4]),32&e[0]&&m(E,t[5]),64&e[0]){let n;for(K=t[6],n=0;n<K.length;n+=1){const o=F(t,K,n);M[n]?M[n].p(o,e):(M[n]=at(o),M[n].c(),M[n].m(O,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=K.length}if(2&e[0]&&A.value!==t[1]&&m(A,t[1]),4&e[0]){let n;for(H=t[2],n=0;n<H.length;n+=1){const o=P(t,H,n);Z[n]?Z[n].p(o,e):(Z[n]=lt(o),Z[n].c(),Z[n].m(V,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=H.length}},d(t){t&&r(e),t&&r(n),t&&r(i),t&&r(b),t&&r(v),t&&r($),t&&r(D),t&&r(w),t&&r(x),t&&r(z),t&&r(C),t&&r(k),t&&r(E),t&&r(N),t&&r(O),s(M,t),t&&r(S),t&&r(W),t&&r(j),t&&r(A),t&&r(I),t&&r(V),s(Z,t),t&&r(L),t&&r(J),t&&r(q),t&&r(B),G=!1,o(U)}}}function at(t){let e,n,o,i,a=t[46].name+"";function s(){return t[29](t[46])}return{c(){e=d("button"),n=u(a)},m(t,a){c(t,e,a),l(e,n),o||(i=g(e,"click",s),o=!0)},p(e,o){t=e,64&o[0]&&a!==(a=t[46].name+"")&&_(n,a)},d(t){t&&r(e),o=!1,i()}}}function lt(t){let e,n;return{c(){e=d("option"),e.__value=n=t[46].name,e.value=e.__value},m(t,n){c(t,e,n)},p(t,o){4&o[0]&&n!==(n=t[46].name)&&(e.__value=n,e.value=e.__value)},d(t){t&&r(e)}}}function ct(e){let n,i,a,h,m,b,v,y,T,$,D,w,x,z,C,k,E,N,O,S,W,j,A,I,P,F,V=""===e[10]&&U(e),L=""!==e[10]&&Y(e),q=function(t){let e,n,i,a,s,h,p,m,b,v,y,T,$;return{c(){e=d("div"),n=u("auth_uid: "),i=u(t[10]),a=f(),s=d("button"),s.textContent="runBoundaryTests",h=f(),p=d("button"),p.textContent="init_and_sample_insert",m=f(),b=d("button"),b.textContent="init_db",v=f(),y=d("button"),y.textContent="get_all_descs_and_tags"},m(o,r){c(o,e,r),l(e,n),l(e,i),c(o,a,r),c(o,s,r),c(o,h,r),c(o,p,r),c(o,m,r),c(o,b,r),c(o,v,r),c(o,y,r),T||($=[g(s,"click",t[22]),g(p,"click",t[15]),g(b,"click",st),g(y,"click",t[17])],T=!0)},p(t,e){1024&e[0]&&_(i,t[10])},d(t){t&&r(e),t&&r(a),t&&r(s),t&&r(h),t&&r(p),t&&r(m),t&&r(b),t&&r(v),t&&r(y),T=!1,o($)}}}(e),B=e[7]>0&&K(e),G=e[0],M=[];for(let t=0;t<G.length;t+=1)M[t]=X(J(e,G,t));let H=e[9].allTags&&tt(e),Z=e[7].length>0&&nt(e),Q=""!==e[10]&&it(e);return{c(){n=d("div"),i=d("div"),a=d("div"),a.textContent="v1.0.2",h=f(),m=d("div"),b=u("auth_login_result: "),v=d("span"),y=u(e[8]),T=f(),V&&V.c(),$=f(),L&&L.c(),D=f(),q&&q.c(),w=f(),x=d("div"),z=d("div"),C=d("div"),B&&B.c(),k=f(),E=d("div");for(let t=0;t<M.length;t+=1)M[t].c();N=f(),O=d("div"),S=d("h1"),S.textContent="Web Data Tags",W=f(),H&&H.c(),j=f(),A=d("div"),Z&&Z.c(),I=f(),P=d("h1"),P.textContent="Web Data Edit",F=f(),Q&&Q.c(),p(a,"class","version"),p(i,"class","header svelte-zzthcz"),p(C,"class","console"),p(E,"class","list svelte-zzthcz"),p(O,"class","list2"),p(z,"class","left-column server_side svelte-zzthcz"),p(A,"class","right-column svelte-zzthcz"),p(x,"class","content svelte-zzthcz"),p(n,"class","container svelte-zzthcz")},m(t,e){c(t,n,e),l(n,i),l(i,a),l(i,h),l(i,m),l(m,b),l(m,v),l(v,y),l(i,T),V&&V.m(i,null),l(i,$),L&&L.m(i,null),l(i,D),q&&q.m(i,null),l(n,w),l(n,x),l(x,z),l(z,C),B&&B.m(C,null),l(z,k),l(z,E);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(E,null);l(z,N),l(z,O),l(O,S),l(O,W),H&&H.m(O,null),l(x,j),l(x,A),Z&&Z.m(A,null),l(A,I),l(A,P),l(A,F),Q&&Q.m(A,null)},p(t,e){if(256&e[0]&&_(y,t[8]),""===t[10]?V?V.p(t,e):(V=U(t),V.c(),V.m(i,$)):V&&(V.d(1),V=null),""!==t[10]?L?L.p(t,e):(L=Y(t),L.c(),L.m(i,D)):L&&(L.d(1),L=null),q.p(t,e),t[7]>0?B?B.p(t,e):(B=K(t),B.c(),B.m(C,null)):B&&(B.d(1),B=null),552961&e[0]){let n;for(G=t[0],n=0;n<G.length;n+=1){const o=J(t,G,n);M[n]?M[n].p(o,e):(M[n]=X(o),M[n].c(),M[n].m(E,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=G.length}t[9].allTags?H?H.p(t,e):(H=tt(t),H.c(),H.m(O,null)):H&&(H.d(1),H=null),t[7].length>0?Z?Z.p(t,e):(Z=nt(t),Z.c(),Z.m(A,I)):Z&&(Z.d(1),Z=null),""!==t[10]?Q?Q.p(t,e):(Q=it(t),Q.c(),Q.m(A,null)):Q&&(Q.d(1),Q=null)},i:t,o:t,d(t){t&&r(n),V&&V.d(),L&&L.d(),q&&q.d(),B&&B.d(),s(M,t),H&&H.d(),Z&&Z.d(),Q&&Q.d()}}}let rt="http://localhost:8000";async function st(){try{const t=await fetch(rt+"/init_db",{method:"POST",headers:{"Content-Type":"application/json"}}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}}function dt(t,e,n){let o="",i=[],a=null,l="",c="",r=[],s=[],d=[],u=[],f="Not logged in",h=[],g=[],p=[],_="";function m(t,e){try{const a=i.find((t=>t.name===e));if(a){a.desc_id=t;const e=r.some((t=>t.id==t.id));e||n(6,r=[...r,a]),n(1,o="")}else{const o={id:i.length+1,name:e,desc_id:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};n(2,i=[...i,o]),n(6,r=[...r,o])}}catch(t){console.error("Error:",t)}}function b(t){try{const e=h.allDescs.find((e=>e.id===t));e?(n(10,_=e.auth_uid),n(3,a=e.id),n(4,l=e.title),n(5,c=e.description),n(6,r=e.tags)):console.error(`No description found with id: ${t}`)}catch(t){console.error("Error:",t)}}function v(t){s.some((e=>e===t))||(s=[...s,t]);const e=h.allDescs.filter((t=>t.tags.some((t=>s.some((e=>e===t.id))))));p.find((t=>"Filter Web Data Descs"===t.title)).descs,n(0,p=[...p.filter((t=>"Filter Web Data Descs"!==t.title)),{title:"Filter Web Data Descs",descs:e}])}const T={validateAuthUid:t=>/^[a-zA-Z0-9_-]+$/.test(t),validateDescId:t=>(console.log("validateDescId",t),Number.isInteger(t)&&t>0),validateISODate:t=>/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(t),validateTitle:t=>(console.log("validateTitle",t),"string"==typeof t&&t.length>=1&&t.length<=100),validateDescription:t=>(console.log("validateDescription",t),"string"==typeof t&&t.length>=1&&t.length<=1e3),validateTagName:t=>"string"==typeof t&&t.length>=1&&t.length<=10,validateData(t){const{auth_uid:e,desc_id:n,created_at:o,updated_at:i,title:a,description:l,tags:c}=t,r=this.validateAuthUid(e);this.validateDescId(n);return{isAuthUidValid:r,isTitleValid:this.validateTitle(a),isDescriptionValid:this.validateDescription(l),areTagsValid:c.every((t=>this.validateTagName(t.name)))}}};function $(){console.log("auth_uid",_,"desc_id",a,"title",l,"description",c,"tags",r);const t={auth_uid:_,desc_id:a,title:l,description:c,tags:r};n(7,u=[]);for(const[e,n]of Object.entries(T.validateData(t)))if(n||u.push(e),"tags"===e)for(const[t,e]of n.entries())for(const[n,o]of Object.entries(T.validateData(e)))o||u.push(`tags[${t}].${n}`);else"auth_uid"===e&&T.validateAuthUid(_),"desc_id"===e&&T.validateDescId(a),"title"===e&&T.validateTitle(l),"description"===e&&T.validateDescription(c);return!(u.length>0)||(console.log(u),!1)}async function D(){try{if(!$())throw new Error("Validation failed");const t=await fetch("http://localhost:8000/insert_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:_,title:l,description:c,tags:r})}),e=await t.json();console.log(e)}catch(t){}}async function w(){try{const t=await fetch(rt+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:_})}),e=await t.json();n(9,h=e),n(2,i=e.allTags),h.any_user_new_allDescs_with_tags.length>0&&(g=e.any_user_new_allDescs_with_tags),n(0,p=[{title:"Your Web Data Descs",descs:g},{title:"Filter Web Data Descs",descs:d},{title:"Web Data Descs",descs:e.allDescs}])}catch(t){console.error("Error:",t)}}async function x(t){try{const e=await fetch(rt+"/delete_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,auth_uid:_})});await e.json()}catch(t){console.error("Error:",t)}}firebase.initializeApp({apiKey:"AIzaSyBcOlIDP2KWbJuKM0WeMHNp-WvjTVfLt9Y",authDomain:"p2auth-ea50a.firebaseapp.com",projectId:"p2auth-ea50a",storageBucket:"p2auth-ea50a.appspot.com",messagingSenderId:"796225429484",appId:"1:796225429484:web:ece56ef2fc0be28cd6eac9"});const z=new firebase.auth.GoogleAuthProvider;const C=[{auth_uid:"user1",desc_id:1,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo1",description:"bar1",tags:[{desc_id:1,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:2,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo2",description:"bar2",tags:[{desc_id:2,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:2,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user2",desc_id:3,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo3",description:"bar3",tags:[{desc_id:3,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:3,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}],k=[{auth_uid:"user1",desc_id:4,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"a".repeat(100),description:"b".repeat(1e3),tags:[{desc_id:4,id:4,name:"tag4",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:5,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"",description:"",tags:[{desc_id:5,id:5,name:"t".repeat(10),created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}];y((async()=>{await async function(){try{console.log("auth_check_login");const t=await new Promise(((t,e)=>{firebase.auth().onAuthStateChanged(t,e)}));console.log("Current user:",t),t?(n(10,_=t.uid),console.log(1),n(8,f="Logged in")):(console.log(2),n(8,f="Not logged in"),n(10,_=""),console.log(3),console.log("test_mode"),n(8,f="Logged in"))}catch(t){console.error("Error during authentication:",t),n(8,f="Authentication failed"),n(10,_="")}}(),await w()}));return t.$$.update=()=>{1&t.$$.dirty[0]&&(async()=>{let t=[];p.length>0&&(t=[{title:"Your Web Data Descs",descs:p.find((t=>"Your Web Data Descs"===t.title)).descs},{title:"Filter Web Data Descs",descs:p.find((t=>"Filter Web Data Descs"===t.title)).descs},{title:"Web Data Descs",descs:p.find((t=>"Web Data Descs"===t.title)).descs}]),n(0,p=[...t])})()},[p,o,i,a,l,c,r,u,f,h,_,m,b,v,async function(){d=[],s=[],n(0,p=[]),await w()},async function(){try{for(const t of C)n(10,_=t.auth_uid),n(3,a=t.desc_id),n(4,l=t.title),n(5,c=t.description),n(6,r=t.tags),await D()}catch(t){console.error("Error:",t)}},D,w,async function(){try{if(!$())throw new Error("Validation failed");const t=await fetch(rt+"/update_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:_,desc_id:a,title:l,description:c,tags:r})});await t.json()}catch(t){console.error("Error:",t)}},x,async function(){try{console.log("auth_google_login");const t=(await firebase.auth().signInWithPopup(z)).user;console.log(4),n(8,f=`Logged in as: ${t.displayName}`)}catch(t){console.error("Error during Google login:",t),alert("Google login failed. "+t.message)}},async function(){try{console.log(5),await firebase.auth().signOut(),n(8,f="Not logged in"),await async function(){try{const t=await fetch(rt+"/",{method:"GET"});n(9,h=await t.json())}catch(t){console.error("Error fetching data:",t)}}()}catch(t){console.error("Error during sign-out:",t),alert("Sign out failed. "+t.message)}},function(){n(4,l=k[1].title),n(5,c=k[1].description),n(6,r=k[1].tags),D()},t=>b(t.id),t=>x(t.id),t=>v(t.id),t=>v(t.id),function(){l=this.value,n(4,l)},function(){c=this.value,n(5,c)},t=>n(6,r=r.filter((e=>e.id!==t.id))),function(){o=this.value,n(1,o)},()=>m(a,o)]}return new class extends I{constructor(t){super(),A(this,t,dt,ct,a,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
