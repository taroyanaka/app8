var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function s(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function g(){return u(" ")}function f(){return u("")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}let y;function v(t){y=t}function b(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const $=[],x=[];let T=[];const w=[],D=Promise.resolve();let C=!1;function E(t){T.push(t)}const S=new Set;let O=0;function k(){if(0!==O)return;const t=y;do{try{for(;O<$.length;){const t=$[O];O++,v(t),N(t.$$)}}catch(t){throw $.length=0,O=0,t}for(v(null),$.length=0,O=0;x.length;)x.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];S.has(e)||(S.add(e),e())}T.length=0}while($.length);for(;w.length;)w.pop()();C=!1,S.clear(),v(t)}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const j=new Set;function I(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];T.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),T=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function A(t,e){-1===t.$$.dirty[0]&&($.push(t),C||(C=!0,D.then(k)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(i,l,c,d,s,u,g,f=[-1]){const h=y;v(i);const p=i.$$={fragment:null,ctx:[],props:u,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:l.target||h.$$.root};g&&g(p.root);let _=!1;if(p.ctx=c?c(i,l.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return p.ctx&&s(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),_&&A(i,t)),e})):[],p.update(),_=!0,o(p.before_update),p.fragment=!!d&&d(p.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);p.fragment&&p.fragment.l(t),t.forEach(r)}else p.fragment&&p.fragment.c();l.intro&&((m=i.$$.fragment)&&m.i&&(j.delete(m),m.i(b))),function(t,n,i,l){const{fragment:c,after_update:r}=t.$$;c&&c.m(n,i),l||E((()=>{const n=t.$$.on_mount.map(e).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),r.forEach(E)}(i,l.target,l.anchor,l.customElement),k()}var m,b;v(h)}class W{$destroy(){I(this,1),this.$destroy=t}$on(e,n){if(!a(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function V(t,e,n){const o=t.slice();return o[42]=e[n],o}function J(t,e,n){const o=t.slice();return o[42]=e[n],o}function L(t,e,n){const o=t.slice();return o[47]=e[n],o}function z(t,e,n){const o=t.slice();return o[42]=e[n],o}function G(t,e,n){const o=t.slice();return o[52]=e[n],o}function U(t,e,n){const o=t.slice();return o[42]=e[n],o}function B(t,e,n){const o=t.slice();return o[52]=e[n],o}function K(t,e,n){const o=t.slice();return o[42]=e[n],o}function M(t,e,n){const o=t.slice();return o[47]=e[n],o}function Y(e){let n,o,a,i,d;return{c(){n=s("div"),o=u("auth_google_login: "),a=s("button"),a.textContent="auth_google_login"},m(t,r){c(t,n,r),l(n,o),l(n,a),i||(d=h(a,"click",e[19]),i=!0)},p:t,d(t){t&&r(n),i=!1,d()}}}function q(e){let n,o,a,i,d;return{c(){n=s("div"),o=u("auth_sign_out: "),a=s("button"),a.textContent="auth_sign_out"},m(t,r){c(t,n,r),l(n,o),l(n,a),i||(d=h(a,"click",e[20]),i=!0)},p:t,d(t){t&&r(n),i=!1,d()}}}function F(t){let e,n,o,a=t[6],i=[];for(let e=0;e<a.length;e+=1)i[e]=H(M(t,a,e));return{c(){e=s("p"),e.textContent="Errors:",n=g();for(let t=0;t<i.length;t+=1)i[t].c();o=f()},m(t,a){c(t,e,a),c(t,n,a);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,a);c(t,o,a)},p(t,e){if(64&e[0]){let n;for(a=t[6],n=0;n<a.length;n+=1){const l=M(t,a,n);i[n]?i[n].p(l,e):(i[n]=H(l),i[n].c(),i[n].m(o.parentNode,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=a.length}},d(t){t&&r(e),t&&r(n),d(i,t),t&&r(o)}}}function H(t){let e,n,o=t[47]+"";return{c(){e=s("div"),n=u(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){64&e[0]&&o!==(o=t[47]+"")&&_(n,o)},d(t){t&&r(e)}}}function Z(t){let e,n=t[9],o=[];for(let e=0;e<n.length;e+=1)o[e]=R(B(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,a){if(397824&a[0]){let i;for(n=t[9],i=0;i<n.length;i+=1){const l=B(t,n,i);o[i]?o[i].p(l,a):(o[i]=R(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){d(o,t),t&&r(e)}}}function Q(t){let e,n,o,a,i,d,f,m,y,v,b,$,x,T,w,D,C=t[42].id+"",E=t[42].desc_id+"",S=t[42].name+"";function O(){return t[23](t[42])}return{c(){e=s("div"),n=s("p"),o=u("id: "),a=u(C),i=g(),d=s("p"),f=u("desc_id: "),m=u(E),y=g(),v=s("p"),b=u("tag.name: "),$=u(S),x=g(),T=s("button"),T.textContent="delete_desc_tag",p(e,"class","desc_tag svelte-faxry4")},m(t,r){c(t,e,r),l(e,n),l(n,o),l(n,a),l(e,i),l(e,d),l(d,f),l(d,m),l(e,y),l(e,v),l(v,b),l(v,$),l(e,x),l(e,T),w||(D=h(T,"click",O),w=!0)},p(e,n){t=e,512&n[0]&&C!==(C=t[42].id+"")&&_(a,C),512&n[0]&&E!==(E=t[42].desc_id+"")&&_(m,E),512&n[0]&&S!==(S=t[42].name+"")&&_($,S)},d(t){t&&r(e),w=!1,D()}}}function R(t){let e,n,a,i,f,p,m,y,v,b,$,x,T,w,D,C,E,S,O,k,N,j,I,A,P,W,V,J=t[52].id+"",L=t[52].auth_uid.slice(0,10)+"",z=t[52].title+"",G=t[52].description+"";function U(){return t[21](t[52])}function B(){return t[22](t[52])}let M=t[52].tags,Y=[];for(let e=0;e<M.length;e+=1)Y[e]=Q(K(t,M,e));return{c(){e=s("div"),n=s("p"),a=u("id: "),i=u(J),f=g(),p=s("button"),p.textContent="set_desc_data",m=g(),y=s("button"),y.textContent="delete_desc",v=g(),b=s("p"),$=u("auth_uid: "),x=u(L),T=u("..."),w=g(),D=s("p"),C=u("title: "),E=u(z),S=g(),O=s("p"),k=u("description: "),N=u(G),j=g(),I=s("div"),I.textContent="tags:",A=g();for(let t=0;t<Y.length;t+=1)Y[t].c();P=g()},m(t,o){c(t,e,o),l(e,n),l(n,a),l(n,i),l(e,f),l(e,p),l(e,m),l(e,y),l(e,v),l(e,b),l(b,$),l(b,x),l(b,T),l(e,w),l(e,D),l(D,C),l(D,E),l(e,S),l(e,O),l(O,k),l(O,N),l(e,j),l(e,I),l(e,A);for(let t=0;t<Y.length;t+=1)Y[t]&&Y[t].m(e,null);l(e,P),W||(V=[h(p,"click",U),h(y,"click",B)],W=!0)},p(n,o){if(t=n,512&o[0]&&J!==(J=t[52].id+"")&&_(i,J),512&o[0]&&L!==(L=t[52].auth_uid.slice(0,10)+"")&&_(x,L),512&o[0]&&z!==(z=t[52].title+"")&&_(E,z),512&o[0]&&G!==(G=t[52].description+"")&&_(N,G),262656&o[0]){let n;for(M=t[52].tags,n=0;n<M.length;n+=1){const a=K(t,M,n);Y[n]?Y[n].p(a,o):(Y[n]=Q(a),Y[n].c(),Y[n].m(e,P))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=M.length}},d(t){t&&r(e),d(Y,t),W=!1,o(V)}}}function X(t){let e,n=t[8].allDescs,o=[];for(let e=0;e<n.length;e+=1)o[e]=et(G(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,a){if(397568&a[0]){let i;for(n=t[8].allDescs,i=0;i<n.length;i+=1){const l=G(t,n,i);o[i]?o[i].p(l,a):(o[i]=et(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){d(o,t),t&&r(e)}}}function tt(t){let e,n,o,a,i,d,f,m,y,v,b,$,x,T,w,D,C=t[42].id+"",E=t[42].desc_id+"",S=t[42].name+"";function O(){return t[26](t[42])}return{c(){e=s("div"),n=s("p"),o=u("id: "),a=u(C),i=g(),d=s("p"),f=u("desc_id: "),m=u(E),y=g(),v=s("p"),b=u("tag.name: "),$=u(S),x=g(),T=s("button"),T.textContent="delete_desc_tag",p(e,"class","desc_tag svelte-faxry4")},m(t,r){c(t,e,r),l(e,n),l(n,o),l(n,a),l(e,i),l(e,d),l(d,f),l(d,m),l(e,y),l(e,v),l(v,b),l(v,$),l(e,x),l(e,T),w||(D=h(T,"click",O),w=!0)},p(e,n){t=e,256&n[0]&&C!==(C=t[42].id+"")&&_(a,C),256&n[0]&&E!==(E=t[42].desc_id+"")&&_(m,E),256&n[0]&&S!==(S=t[42].name+"")&&_($,S)},d(t){t&&r(e),w=!1,D()}}}function et(t){let e,n,a,i,f,p,m,y,v,b,$,x,T,w,D,C,E,S,O,k,N,j,I,A,P,W,V,J=t[52].id+"",L=t[52].auth_uid.slice(0,10)+"",z=t[52].title+"",G=t[52].description+"";function B(){return t[24](t[52])}function K(){return t[25](t[52])}let M=t[52].tags,Y=[];for(let e=0;e<M.length;e+=1)Y[e]=tt(U(t,M,e));return{c(){e=s("div"),n=s("p"),a=u("id: "),i=u(J),f=g(),p=s("button"),p.textContent="set_desc_data",m=g(),y=s("button"),y.textContent="delete_desc",v=g(),b=s("p"),$=u("auth_uid: "),x=u(L),T=u("..."),w=g(),D=s("p"),C=u("title: "),E=u(z),S=g(),O=s("p"),k=u("description: "),N=u(G),j=g(),I=s("div"),I.textContent="tags:",A=g();for(let t=0;t<Y.length;t+=1)Y[t].c();P=g()},m(t,o){c(t,e,o),l(e,n),l(n,a),l(n,i),l(e,f),l(e,p),l(e,m),l(e,y),l(e,v),l(e,b),l(b,$),l(b,x),l(b,T),l(e,w),l(e,D),l(D,C),l(D,E),l(e,S),l(e,O),l(O,k),l(O,N),l(e,j),l(e,I),l(e,A);for(let t=0;t<Y.length;t+=1)Y[t]&&Y[t].m(e,null);l(e,P),W||(V=[h(p,"click",B),h(y,"click",K)],W=!0)},p(n,o){if(t=n,256&o[0]&&J!==(J=t[52].id+"")&&_(i,J),256&o[0]&&L!==(L=t[52].auth_uid.slice(0,10)+"")&&_(x,L),256&o[0]&&z!==(z=t[52].title+"")&&_(E,z),256&o[0]&&G!==(G=t[52].description+"")&&_(N,G),262400&o[0]){let n;for(M=t[52].tags,n=0;n<M.length;n+=1){const a=U(t,M,n);Y[n]?Y[n].p(a,o):(Y[n]=tt(a),Y[n].c(),Y[n].m(e,P))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=M.length}},d(t){t&&r(e),d(Y,t),W=!1,o(V)}}}function nt(t){let e,n=t[8].allTags,o=[];for(let e=0;e<n.length;e+=1)o[e]=ot(z(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);c(t,e,n)},p(t,a){if(256&a[0]){let i;for(n=t[8].allTags,i=0;i<n.length;i+=1){const l=z(t,n,i);o[i]?o[i].p(l,a):(o[i]=ot(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){d(o,t),t&&r(e)}}}function ot(t){let e,n,o,a,i,d,f,h,p,m=t[42].id+"",y=t[42].name+"";return{c(){e=s("div"),n=s("p"),o=u("id: "),a=u(m),i=g(),d=s("p"),f=u("tag.name: "),h=u(y),p=g()},m(t,r){c(t,e,r),l(e,n),l(n,o),l(n,a),l(e,i),l(e,d),l(d,f),l(d,h),l(e,p)},p(t,e){256&e[0]&&m!==(m=t[42].id+"")&&_(a,m),256&e[0]&&y!==(y=t[42].name+"")&&_(h,y)},d(t){t&&r(e)}}}function at(t){let e,n,o,a=t[6],i=[];for(let e=0;e<a.length;e+=1)i[e]=it(L(t,a,e));return{c(){e=s("h2"),e.textContent="errors",n=g();for(let t=0;t<i.length;t+=1)i[t].c();o=f()},m(t,a){c(t,e,a),c(t,n,a);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,a);c(t,o,a)},p(t,e){if(64&e[0]){let n;for(a=t[6],n=0;n<a.length;n+=1){const l=L(t,a,n);i[n]?i[n].p(l,e):(i[n]=it(l),i[n].c(),i[n].m(o.parentNode,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=a.length}},d(t){t&&r(e),t&&r(n),d(i,t),t&&r(o)}}}function it(t){let e,n,o=t[47]+"";return{c(){e=s("p"),n=u(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){64&e[0]&&o!==(o=t[47]+"")&&_(n,o)},d(t){t&&r(e)}}}function lt(t){let e,n,a,i,f,y,v,b,$,x,T,w,D,C,E,S,O,k,N,j,I,A,P,W,L,z,G,U,B,K,M,Y,q=t[10].slice(0,10)+"",F=t[5],H=[];for(let e=0;e<F.length;e+=1)H[e]=ct(J(t,F,e));let Z=t[1],Q=[];for(let e=0;e<Z.length;e+=1)Q[e]=rt(V(t,Z,e));return{c(){e=s("button"),e.textContent="update_desc",n=u("\n\t\t\n\t\t\n\t\t\n\t\t \n\t\tauth_uid: "),a=s("p"),i=u(q),f=u("..."),y=g(),v=s("p"),b=u("id: "),$=u(t[2]),x=u("\n\t\t\n\t\t\n\t\t\n\t\ttitle: "),T=s("input"),w=s("p"),D=u(t[3]),C=u("\n\t\tdescription: "),E=s("input"),S=s("p"),O=u(t[4]),k=g(),N=s("div"),N.textContent="tags:",j=g();for(let t=0;t<H.length;t+=1)H[t].c();I=u("\t\t\t\t\n\t\t\t\t\n\t\t\t\ttagをdescに追加\n\t\t\t\t"),A=s("label"),A.textContent="all_tags",P=g(),W=s("input"),L=g(),z=s("datalist");for(let t=0;t<Q.length;t+=1)Q[t].c();G=g(),U=s("button"),U.textContent="add_tag_to_desc",B=g(),K=s("button"),K.textContent="insert_desc",p(T,"type","text"),p(E,"type","text"),p(A,"for","my_all_tags"),p(W,"list","all_tags"),p(W,"id","my_all_tags"),p(W,"name","my_all_tags"),p(z,"id","all_tags"),p(K,"class","fetch_insert_desc_button svelte-faxry4")},m(o,r){c(o,e,r),c(o,n,r),c(o,a,r),l(a,i),l(a,f),c(o,y,r),c(o,v,r),l(v,b),l(v,$),c(o,x,r),c(o,T,r),m(T,t[3]),c(o,w,r),l(w,D),c(o,C,r),c(o,E,r),m(E,t[4]),c(o,S,r),l(S,O),c(o,k,r),c(o,N,r),c(o,j,r);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(o,r);c(o,I,r),c(o,A,r),c(o,P,r),c(o,W,r),m(W,t[0]),c(o,L,r),c(o,z,r);for(let t=0;t<Q.length;t+=1)Q[t]&&Q[t].m(z,null);c(o,G,r),c(o,U,r),c(o,B,r),c(o,K,r),M||(Y=[h(e,"click",t[16]),h(T,"input",t[27]),h(E,"input",t[28]),h(W,"input",t[29]),h(U,"click",t[30]),h(K,"click",t[14])],M=!0)},p(t,e){if(1024&e[0]&&q!==(q=t[10].slice(0,10)+"")&&_(i,q),4&e[0]&&_($,t[2]),8&e[0]&&T.value!==t[3]&&m(T,t[3]),8&e[0]&&_(D,t[3]),16&e[0]&&E.value!==t[4]&&m(E,t[4]),16&e[0]&&_(O,t[4]),32&e[0]){let n;for(F=t[5],n=0;n<F.length;n+=1){const o=J(t,F,n);H[n]?H[n].p(o,e):(H[n]=ct(o),H[n].c(),H[n].m(I.parentNode,I))}for(;n<H.length;n+=1)H[n].d(1);H.length=F.length}if(1&e[0]&&W.value!==t[0]&&m(W,t[0]),2&e[0]){let n;for(Z=t[1],n=0;n<Z.length;n+=1){const o=V(t,Z,n);Q[n]?Q[n].p(o,e):(Q[n]=rt(o),Q[n].c(),Q[n].m(z,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=Z.length}},d(t){t&&r(e),t&&r(n),t&&r(a),t&&r(y),t&&r(v),t&&r(x),t&&r(T),t&&r(w),t&&r(C),t&&r(E),t&&r(S),t&&r(k),t&&r(N),t&&r(j),d(H,t),t&&r(I),t&&r(A),t&&r(P),t&&r(W),t&&r(L),t&&r(z),d(Q,t),t&&r(G),t&&r(U),t&&r(B),t&&r(K),M=!1,o(Y)}}}function ct(t){let e,n,o,a,i,d,g,f,h,m=t[42].id+"",y=t[42].desc_id+"",v=t[42].name+"";return{c(){e=u("id: "),n=u(m),o=u("\n\t\t\tdesc_id: "),a=u(y),i=u("\n\t\t\ttag.name: "),d=s("input"),f=s("p"),h=u(v),p(d,"type","text"),d.value=g=t[42].name},m(t,r){c(t,e,r),c(t,n,r),c(t,o,r),c(t,a,r),c(t,i,r),c(t,d,r),c(t,f,r),l(f,h)},p(t,e){32&e[0]&&m!==(m=t[42].id+"")&&_(n,m),32&e[0]&&y!==(y=t[42].desc_id+"")&&_(a,y),32&e[0]&&g!==(g=t[42].name)&&d.value!==g&&(d.value=g),32&e[0]&&v!==(v=t[42].name+"")&&_(h,v)},d(t){t&&r(e),t&&r(n),t&&r(o),t&&r(a),t&&r(i),t&&r(d),t&&r(f)}}}function rt(t){let e,n;return{c(){e=s("option"),e.__value=n=t[42].name,e.value=e.__value},m(t,n){c(t,e,n)},p(t,o){2&o[0]&&n!==(n=t[42].name)&&(e.__value=n,e.value=e.__value)},d(t){t&&r(e)}}}function dt(e){let n,a,i,d,f,m,y,v,b,$,x,T,w,D,C,E,S,O,k,N,j,I,A,P,W,V,J,L,z,G,U,B,K,M,H,Q,R,tt,et,ot,it,ct,rt,dt=""===e[10]&&Y(e),st=""!==e[10]&&q(e),gt=e[6]>0&&F(e),ft=e[9].length>0&&Z(e),ht=e[8].allDescs&&X(e),pt=e[8].allTags&&nt(e),_t=e[6].length>0&&at(e),mt=""!==e[10]&&lt(e);return{c(){n=s("div"),a=s("div"),i=s("div"),d=s("div"),d.textContent="v1.0.1",f=g(),m=s("div"),y=u("auth_uid: "),v=u(e[10]),b=g(),$=s("div"),x=u("auth_login_result: "),T=s("span"),w=u(e[7]),D=g(),dt&&dt.c(),C=g(),st&&st.c(),E=g(),S=s("button"),S.textContent="init_and_sample_insert",O=g(),k=s("button"),k.textContent="init_db",N=g(),j=s("button"),j.textContent="get_all_descs_and_tags",I=g(),A=s("div"),P=s("div"),W=s("div"),gt&&gt.c(),V=g(),J=s("div"),L=s("h1"),L.textContent="Your Web Data Descs",z=g(),ft&&ft.c(),G=g(),U=s("h1"),U.textContent="Web Data Descs",B=g(),ht&&ht.c(),K=g(),M=s("div"),H=s("h1"),H.textContent="Web Data Tags",Q=g(),pt&&pt.c(),R=g(),tt=s("div"),_t&&_t.c(),et=g(),ot=s("h1"),ot.textContent="Web Data Edit",it=g(),mt&&mt.c(),p(d,"class","version"),p(a,"class","header svelte-faxry4"),p(W,"class","console"),p(J,"class","list"),p(M,"class","list2"),p(P,"class","left-column server_side svelte-faxry4"),p(tt,"class","right-column svelte-faxry4"),p(A,"class","content svelte-faxry4"),p(n,"class","container svelte-faxry4")},m(t,o){c(t,n,o),l(n,a),l(a,i),l(i,d),l(i,f),l(i,m),l(m,y),l(m,v),l(i,b),l(i,$),l($,x),l($,T),l(T,w),l(i,D),dt&&dt.m(i,null),l(i,C),st&&st.m(i,null),l(a,E),l(a,S),l(a,O),l(a,k),l(a,N),l(a,j),l(n,I),l(n,A),l(A,P),l(P,W),gt&&gt.m(W,null),l(P,V),l(P,J),l(J,L),l(J,z),ft&&ft.m(J,null),l(J,G),l(J,U),l(J,B),ht&&ht.m(J,null),l(P,K),l(P,M),l(M,H),l(M,Q),pt&&pt.m(M,null),l(A,R),l(A,tt),_t&&_t.m(tt,null),l(tt,et),l(tt,ot),l(tt,it),mt&&mt.m(tt,null),ct||(rt=[h(S,"click",e[13]),h(k,"click",ut),h(j,"click",e[15])],ct=!0)},p(t,e){1024&e[0]&&_(v,t[10]),128&e[0]&&_(w,t[7]),""===t[10]?dt?dt.p(t,e):(dt=Y(t),dt.c(),dt.m(i,C)):dt&&(dt.d(1),dt=null),""!==t[10]?st?st.p(t,e):(st=q(t),st.c(),st.m(i,null)):st&&(st.d(1),st=null),t[6]>0?gt?gt.p(t,e):(gt=F(t),gt.c(),gt.m(W,null)):gt&&(gt.d(1),gt=null),t[9].length>0?ft?ft.p(t,e):(ft=Z(t),ft.c(),ft.m(J,G)):ft&&(ft.d(1),ft=null),t[8].allDescs?ht?ht.p(t,e):(ht=X(t),ht.c(),ht.m(J,null)):ht&&(ht.d(1),ht=null),t[8].allTags?pt?pt.p(t,e):(pt=nt(t),pt.c(),pt.m(M,null)):pt&&(pt.d(1),pt=null),t[6].length>0?_t?_t.p(t,e):(_t=at(t),_t.c(),_t.m(tt,et)):_t&&(_t.d(1),_t=null),""!==t[10]?mt?mt.p(t,e):(mt=lt(t),mt.c(),mt.m(tt,null)):mt&&(mt.d(1),mt=null)},i:t,o:t,d(t){t&&r(n),dt&&dt.d(),st&&st.d(),gt&&gt.d(),ft&&ft.d(),ht&&ht.d(),pt&&pt.d(),_t&&_t.d(),mt&&mt.d(),ct=!1,o(rt)}}}let st="http://localhost:8000";async function ut(){try{const t=await fetch(st+"/init_db",{method:"POST",headers:{"Content-Type":"application/json"}}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}}function gt(t,e,n){let o="",a=[],i=null,l=(new Date).toISOString(),c=(new Date).toISOString(),r="",d="",s=[],u=[],g="Not logged in",f=[],h=[],p="";function _(t,e){try{const o=a.find((t=>t.name===e));if(o){o.desc_id=t;const e=s.some((t=>t.id==t.id));e||n(5,s=[...s,o])}else{const o={id:a.length+1,name:e,desc_id:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};n(1,a=[...a,o]),n(5,s=[...s,o])}}catch(t){console.error("Error:",t)}}function m(t){try{const e=f.allDescs.find((e=>e.id===t));console.log(e.tags),e?(n(10,p=e.auth_uid),n(2,i=e.id),l=e.created_at,c=e.updated_at,n(3,r=e.title),n(4,d=e.description),n(5,s=e.tags)):console.error(`No description found with id: ${t}`)}catch(t){console.error("Error:",t)}}const y=[{auth_uid:"user1",desc_id:1,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo1",description:"bar1",tags:[{desc_id:1,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:1,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user1",desc_id:2,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo2",description:"bar2",tags:[{desc_id:2,id:1,name:"tag1",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:2,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]},{auth_uid:"user2",desc_id:3,created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00",title:"foo3",description:"bar3",tags:[{desc_id:3,id:2,name:"tag2",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"},{desc_id:3,id:3,name:"tag3",created_at:"2024-09-01T00:00:00",updated_at:"2024-09-01T00:00:00"}]}];const v={validateAuthUid:t=>/^[a-zA-Z0-9_-]+$/.test(t),validateDescId:t=>(console.log("validateDescId",t),Number.isInteger(t)&&t>0),validateISODate:t=>/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(t),validateTitle:t=>(console.log("validateTitle",t),"string"==typeof t&&t.length>=1&&t.length<=100),validateDescription:t=>(console.log("validateDescription",t),"string"==typeof t&&t.length>=1&&t.length<=1e3),validateTagName:t=>"string"==typeof t&&t.length>=1&&t.length<=10,validateData(t){const{auth_uid:e,desc_id:n,created_at:o,updated_at:a,title:i,description:l,tags:c}=t,r=this.validateAuthUid(e);this.validateDescId(n);return{isAuthUidValid:r,isTitleValid:this.validateTitle(i),isDescriptionValid:this.validateDescription(l),areTagsValid:c.every((t=>this.validateTagName(t.name)))}}};function $(){console.log("auth_uid",p,"desc_id",i,"created_at",l,"updated_at",c,"title",r,"description",d,"tags",s);const t={auth_uid:p,desc_id:i,created_at:l,updated_at:c,title:r,description:d,tags:s};n(6,u=[]);for(const[e,n]of Object.entries(v.validateData(t)))if(n||u.push(e),"tags"===e)for(const[t,e]of n.entries())for(const[n,o]of Object.entries(v.validateData(e)))o||u.push(`tags[${t}].${n}`);else"auth_uid"===e&&v.validateAuthUid(p),"desc_id"===e&&v.validateDescId(i),"created_at"===e&&v.validateISODate(l),"updated_at"===e&&v.validateISODate(c),"title"===e&&v.validateTitle(r),"description"===e&&v.validateDescription(d);return!(u.length>0)||(console.log(u),!1)}async function x(){try{if(!$())throw new Error("Validation failed");const t=await fetch("http://localhost:8000/insert_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:p,created_at:l,updated_at:c,title:r,description:d,tags:s})}),e=await t.json();console.log(e)}catch(t){}}async function T(){try{const t=await fetch(st+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:p})}),e=await t.json();n(8,f=e),n(1,a=e.allTags),console.log(1),f.any_user_new_allDescs_with_tags.length>0&&(console.log(2),console.log("any_user_new_allDescs_with_tags"),console.log(e.any_user_new_allDescs_with_tags),n(9,h=e.any_user_new_allDescs_with_tags)),console.log(e)}catch(t){console.error("Error:",t)}}async function w(t){try{const e=await fetch(st+"/delete_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,auth_uid:p})}),n=await e.json();console.log(n)}catch(t){console.error("Error:",t)}}async function D(t,e){try{console.log(t,e,p);const n=await fetch(st+"/delete_desc_tag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,desc_id:e,auth_uid:p})}),o=await n.json();console.log(o)}catch(t){console.error("Error:",t)}}firebase.initializeApp({apiKey:"AIzaSyBcOlIDP2KWbJuKM0WeMHNp-WvjTVfLt9Y",authDomain:"p2auth-ea50a.firebaseapp.com",projectId:"p2auth-ea50a",storageBucket:"p2auth-ea50a.appspot.com",messagingSenderId:"796225429484",appId:"1:796225429484:web:ece56ef2fc0be28cd6eac9"});const C=new firebase.auth.GoogleAuthProvider;b((async()=>{await async function(){try{console.log("auth_check_login");const t=await new Promise(((t,e)=>{firebase.auth().onAuthStateChanged(t,e)}));console.log("Current user:",t),t?(n(10,p=t.uid),console.log(1),n(7,g="Logged in")):(console.log(2),n(7,g="Not logged in"),n(10,p=""))}catch(t){console.error("Error during authentication:",t),n(7,g="Authentication failed"),n(10,p="")}}(),await T()}));return(async()=>{})(),[o,a,i,r,d,s,u,g,f,h,p,_,m,async function(){try{for(const t of y)n(10,p=t.auth_uid),n(2,i=t.desc_id),l=t.created_at,c=t.updated_at,n(3,r=t.title),n(4,d=t.description),n(5,s=t.tags),await x()}catch(t){console.error("Error:",t)}},x,T,async function(){try{if(console.log("fetch_update_desc"),console.log(p,i,l,c,r,d,s),!$())throw new Error("Validation failed");const t=await fetch(st+"/update_desc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_uid:p,desc_id:i,title:r,description:d,tags:s})}),e=await t.json();console.log(e)}catch(t){console.error("Error:",t)}},w,D,async function(){try{console.log("auth_google_login");const t=(await firebase.auth().signInWithPopup(C)).user;console.log(4),n(7,g=`Logged in as: ${t.displayName}`)}catch(t){console.error("Error during Google login:",t),alert("Google login failed. "+t.message)}},async function(){try{console.log(5),await firebase.auth().signOut(),n(7,g="Not logged in"),await async function(){try{const t=await fetch(st+"/",{method:"GET"});n(8,f=await t.json())}catch(t){console.error("Error fetching data:",t)}}()}catch(t){console.error("Error during sign-out:",t),alert("Sign out failed. "+t.message)}},t=>m(t.id),t=>w(t.id),t=>D(t.id,t.desc_id),t=>m(t.id),t=>w(t.id),t=>D(t.id,t.desc_id),function(){r=this.value,n(3,r)},function(){d=this.value,n(4,d)},function(){o=this.value,n(0,o)},()=>_(i,o)]}return new class extends W{constructor(t){super(),P(this,t,gt,dt,i,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
